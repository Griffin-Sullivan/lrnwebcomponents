!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js"),require("@lrnwebcomponents/simple-popover/simple-popover.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/utils/utils.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/simple-tooltip/simple-tooltip.js","@lrnwebcomponents/simple-popover/simple-popover.js","lit-element/lit-element.js","@lrnwebcomponents/utils/utils.js"],e):e((n=n||self).PageContentsMenu={},null,n.$$0,n.litElement_js,n.utils_js)}(this,function(n,e,t,i,o){"use strict";function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function s(n,e,t){return e&&l(n.prototype,e),t&&l(n,t),n}function a(n){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function c(n,e){return(c=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function p(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var t,i,o,r=a(n);if(e){var l=a(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return i=this,!(o=t)||"object"!=typeof o&&"function"!=typeof o?p(i):o}}function d(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function h(){var n=d(["\n        :host {\n          display: block;\n        }\n        :host([is-empty][hide-if-empty]) {\n          display: none;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        [hidden] {\n          display: none;\n        }\n        :host([mobile]) .wrapper,\n        :host([mobile]) .header,\n        :host([mobile]) .header .svg {\n          padding: 0;\n          margin: 0;\n        }\n        .wrapper {\n          display: inline-block;\n          padding: 8px;\n        }\n        .header {\n          display: flex;\n          color: var(--page-contents-menu-heading-color, #9daab6);\n          padding: 0 24px 0 0;\n          margin: 0 0 8px 0;\n        }\n        .header .svg {\n          padding-right: 6px;\n          display: inline-flex;\n          color: var(--page-contents-menu-link, #74818d);\n        }\n        svg {\n          width: 1em;\n          height: 1em;\n          vertical-align: middle;\n        }\n        .header .label {\n          align-items: center;\n          display: inline-flex;\n          font-size: var(--page-contents-menu-heading-font-size, 10px);\n          font-weight: var(--page-contents-menu-heading-font-weight, 700);\n          padding: 0;\n          margin: 0;\n          font-family: Content-font, Roboto, sans-serif;\n          line-height: 1;\n          letter-spacing: 1.2px;\n          text-transform: uppercase;\n        }\n\n        .contents {\n          margin: 0;\n          padding: 0;\n          list-style-type: none;\n        }\n        .item {\n          margin: 0;\n          display: block;\n          padding: 0;\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n        }\n        .link {\n          font-family: Content-font, Roboto, sans-serif;\n          line-height: 1.5;\n          display: flex;\n          padding: 4px 16px 4px 24px;\n          font-size: var(--page-contents-menu-link-font-size, 12px);\n          text-decoration: none;\n          font-weight: var(--page-contents-menu-link-font-weight, 500);\n          color: var(--page-contents-menu-link, #74818d);\n          cursor: pointer;\n          margin: 0;\n          align-items: center;\n          vertical-align: middle;\n          -webkit-box-align: center;\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n        }\n        .link:hover,\n        .link:focus,\n        .link:active {\n          text-decoration: underline;\n          color: var(--page-contents-menu-link-hover, rgb(56, 132, 255));\n        }\n        .link:focus {\n          outline: 1px solid var(--page-contents-menu-link, black);\n          outline-offset: 4px;\n        }\n        .indent-1 {\n          padding-left: 0px;\n        }\n        .indent-2 {\n          padding-left: 16px;\n        }\n        .indent-3,\n        .indent-4,\n        .indent-5,\n        .indent-6 {\n          padding-left: 32px;\n        }\n      "]);return h=function(){return n},n}function f(){var n=d(['\n      <li class="item">\n        <a\n          class="link indent-','"\n          href="','"\n          @click="','"\n          @keypress="','"\n          data-index="','"\n          >',"</a\n        >\n      </li>\n    "]);return f=function(){return n},n}function g(){var n=d(['\n        <li class="item">\n          <a\n            class="link indent-','"\n            tabindex="0"\n            @click="','"\n            @keypress="','"\n            data-index="','"\n            >',"</a\n          >\n        </li>\n      "]);return g=function(){return n},n}function m(){var n=d(['\n              <ol class="contents">\n                ',"\n              </ol>\n            "]);return m=function(){return n},n}function y(){var n=d(['\n              <simple-popover\n                class="dropdown pull-left font-settings js-toolbar-action settings-container"\n                ?hidden="','"\n                auto\n              >\n                <ol class="contents">\n                  ',"\n                </ol>\n              </simple-popover>\n            "]);return y=function(){return n},n}function v(){var n=d([' <h2 class="label">',"</h2> "]);return v=function(){return n},n}function b(){var n=d(['\n      <section class="wrapper" role="navigation">\n        <div class="header">\n          <a\n            class="svg"\n            @click="','"\n            @keypress="','"\n            id="popovertarget"\n            aria-label="','"\n          >\n            <svg\n              preserveAspectRatio="xMidYMid meet"\n              height="1em"\n              width="1em"\n              fill="none"\n              xmlns="http://www.w3.org/2000/svg"\n              viewBox="0 0 24 24"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke="currentColor"\n              class="icon-7f6730be--text-3f89f380"\n            >\n              <g>\n                <line x1="21" y1="10" x2="7" y2="10"></line>\n                <line x1="21" y1="6" x2="3" y2="6"></line>\n                <line x1="21" y1="14" x2="3" y2="14"></line>\n                <line x1="21" y1="18" x2="7" y2="18"></line>\n              </g>\n            </svg>\n          </a>\n          <simple-tooltip\n            for="popovertarget"\n            offset="32"\n            ?hidden="','"\n          >\n            ',"\n          </simple-tooltip>\n          ","\n        </div>\n        ","\n      </section>\n    "]);return b=function(){return n},n}var k=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&c(n,e)}(l,i.LitElement);var e=u(l);function l(){var n;return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=e.call(this)).relationship=null,n.items=[],n.isEmpty=!0,n.hideIfEmpty=!1,n.contentContainer=null,n.mobile=!1,n.hideSettings=!0,n.label="Contents",window.addEventListener("click",n.checkMenuOpen.bind(p(n))),n.hierarchyTags=["h1","h2","h3","h4","h5","h6"],n}return s(l,[{key:"render",value:function(){var n=this;return i.html(b(),this.toggleSettings,this.keyToggle,this.label,!this.mobile||!this.hideSettings,this.label,this.mobile?"":i.html(v(),this.label),this.mobile?i.html(y(),this.hideSettings,this.items.map(function(e,t){return n.renderItem(e,t)})):i.html(m(),this.items.map(function(e,t){return n.renderItem(e,t)})))}},{key:"keyToggle",value:function(n){["Enter","Space"].includes(n.key)&&this.toggleSettings(n)}},{key:"keyScroll",value:function(n){"Enter"==n.key&&this.scrollToObject(n)}},{key:"toggleSettings",value:function(n){this.mobile&&(this.hideSettings=!this.hideSettings)}},{key:"scrollToObject",value:function(n){var e=o.normalizeEventPath(n)[0];e.getAttribute("data-index")&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),this.items[parseInt(e.getAttribute("data-index"))].object.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),this.hideSettings=!0)}},{key:"renderItem",value:function(n,e){return null==n.link&&n.object?i.html(g(),n.indent,this.scrollToObject,this.keyScroll,e,n.title):i.html(f(),n.indent,n.link,this.scrollToObject,this.keyScroll,e,n.title)}}],[{key:"styles",get:function(){return[i.css(h())]}},{key:"haxProperties",get:function(){return{canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Page contents-menu",description:"Links that jump you to the right place in the page's content",icon:"icons:android",color:"green",groups:["Contents"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"btopro",owner:"The Pennsylvania State University"}},settings:{configure:[],advanced:[]}}}},{key:"properties",get:function(){return{contentContainer:{type:Object},relationship:{type:String},items:{type:Array},mobile:{type:Boolean,reflect:!0},label:{type:String},hideSettings:{type:Boolean},hideIfEmpty:{type:Boolean,attribute:"hide-if-empty",reflect:!0},isEmpty:{type:Boolean,attribute:"is-empty",reflect:!0}}}},{key:"tag",get:function(){return"page-contents-menu"}}]),s(l,[{key:"checkMenuOpen",value:function(n){var e=o.normalizeEventPath(n)[0];!this.mobile||this.hideSettings||!e.includes||e.includes(this.__toggleTarget)||e.includes(this.shadowRoot.querySelector("simple-popover"))||(this.hideSettings=!0)}},{key:"firstUpdated",value:function(){"parent"==this.relationship?this.contentContainer=this.parentElement:"next"==this.relationship?this.contentContainer=this.nextElementSibling:"previous"==this.relationship&&(this.contentContainer=this.previousElementSibling)}},{key:"updated",value:function(n){var e=this;n.forEach(function(n,i){"contentContainer"==i&&e._contentContainerChanged(e[i]),"mobile"==i&&(e[i]?Promise.resolve(t).then(function(n){setTimeout(function(){e.__toggleTarget=e.shadowRoot.querySelector("#popovertarget"),e.__toggleTarget.setAttribute("tabindex","0"),e.shadowRoot.querySelector("simple-popover").target=e.__toggleTarget},0)}):n&&!e[i]&&e.__toggleTarget.removeAttribute("tabindex"))})}},{key:"updateMenu",value:function(){for(var n=this.hierarchyTags,e=[],t=0;t<this.contentContainer.childNodes.length;t++){var i=this.contentContainer.childNodes[t];if("undefined"!==r(i.tagName)&&n.includes(i.tagName.toLowerCase())){var o={title:i.innerText,link:i.id?"#"+i.id:null,object:i,indent:parseInt(i.tagName.toLowerCase().replace("h",""))};e.push(o)}}0===e.length?this.isEmpty=!0:this.isEmpty=!1,this.items=[].concat(e)}},{key:"_contentContainerChanged",value:function(n){n&&n.childNodes&&n.childNodes.length>0&&this.updateMenu()}}]),l}();customElements.define(k.tag,k),n.PageContentsMenu=k,Object.defineProperty(n,"__esModule",{value:!0})});
