!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("lit-html/directives/cache.js"),require("lit-html/lit-html.js")):"function"==typeof define&&define.amd?define(["exports","lit-element/lit-element.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","lit-html/directives/cache.js","lit-html/lit-html.js"],t):t((e=e||self).SimplePicker={},e.litElement_js,null,null,e.cache_js,e.litHtml_js)}(this,function(e,t,n,i,o,r){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i,o,r=h(e);if(t){var l=h(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return i=this,!(o=n)||"object"!=typeof o&&"function"!=typeof o?m(i):o}}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(){var e=k(["red"]);return g=function(){return e},e}function y(){var e=k(["\n      :host {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        color: var(--simple-picker-color);\n      }\n      :host([hidden]) {\n        display: none;\n      }\n      div {\n        margin: unset;\n        padding: unset;\n      }\n      #label {\n        padding: var(\n          --simple-picker-option-label-padding,\n          var(--simple-picker-option-padding, 2px 10px)\n        );\n        line-height: 100%;\n        width: max-content;\n      }\n\n      :host([hide-option-labels]) #label {\n        position: absolute;\n        left: -999999px;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n      }\n\n      simple-icon-lite {\n        --simple-icon-width: var(--simple-picker-option-size, 24px);\n        --simple-icon-height: var(--simple-picker-option-size, 24px);\n        width: var(--simple-picker-option-size, 24px);\n        min-height: var(--simple-picker-option-size, 24px);\n        min-width: var(--simple-picker-option-size, 24px);\n        line-height: var(--simple-picker-option-size, 24px);\n      }\n    "]);return y=function(){return e},e}function _(){var e=k(['\n      <simple-icon-lite\n        ?hidden="','"\n        .icon="','"\n        aria-hidden="true"\n      ></simple-icon-lite>\n      <div id="label">\n        <slot ?hidden="','"></slot>\n        ',"\n      </div>\n    "]);return _=function(){return e},e}var w=function(e){u(i,t.LitElement);var n=f(i);function i(){var e;return l(this,i),(e=n.call(this)).active=null,e.data=null,e.hidden=!1,e.hideOptionLabels=!1,e.icon=null,e.id=null,e.label=null,e.selected=!1,e.titleAsHtml=!1,e.value=null,setTimeout(function(){e.addEventListener("focus",e._handleFocus.bind(m(e))),e.addEventListener("mouseover",e._handleHover.bind(m(e)))},0),e}return a(i,[{key:"render",value:function(){return t.html(_(),!this.icon,this.icon,!this.titleAsHtml,this.titleAsHtml?"":this.label)}}],[{key:"styles",get:function(){return t.css(y())}}]),a(i,[{key:"updated",value:function(e){var t=this;b(h(i.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"label"===n&&(t.innerHTML=t.label)})}},{key:"_handleFocus",value:function(){this.dispatchEvent(new CustomEvent("option-focus",{detail:this}))}},{key:"_handleHover",value:function(){this.dispatchEvent(new CustomEvent("option-focus",{detail:this}))}},{key:"_getColor",value:function(){return t.css(g())}}],[{key:"properties",get:function(){return{active:{type:Boolean,reflect:!0},data:{type:Object},hidden:{type:Boolean,reflect:!0},hideOptionLabels:{type:Boolean,reflect:!0,attribute:"hide-option-labels"},icon:{type:String},id:{type:String,reflect:!0},label:{type:String,reflect:!0},selected:{type:Boolean,reflect:!0},styles:{type:Object},titleAsHtml:{type:Boolean,reflect:!0,attribute:"title-as-html"},value:{type:String,reflect:!0}}}},{key:"tag",get:function(){return"simple-picker-option"}}]),i}();function x(){var e=k([" option-","-"," "]);return x=function(){return e},e}function O(){var e=k(['\n        <simple-picker-option\n          @option-focus="','"\n          @set-selected-option="','"\n          ?active="','"\n          ?hide-option-labels="','"\n          ?hidden="','"\n          ?selected="','"\n          ?title-as-html="','"\n          .data="','"\n          .icon="','"\n          .id="option-',"-",'"\n          .label="','"\n          .style=','\n          aria-selected="','"\n          role="option"\n          tabindex="-1"\n          value="','"\n        >\n        </simple-picker-option>\n      ']);return O=function(){return e},e}function j(){var e=k(["",""]);return j=function(){return e},e}function E(){var e=k(['\n        <div class="row">\n          ',"\n        </div>\n      "]);return E=function(){return e},e}function C(){var e=k(["",""]);return C=function(){return e},e}function z(){var e=k(["\n:host {\n  display: var(--simple-picker-display,inline-flex);\n  align-items: center;\n  color: var(--simple-picker-color, currentColor);\n  font-family: var(--simple-picker-font-family, inherit);\n  font-size: var(--simple-picker-font-size, inherit);\n  --simple-picker-height: calc(var(--simple-picker-option-size, 24px) + var(--simple-picker-sample-padding, 2px) * 2 + var(--simple-picker-border-width, 1px) * 2);\n  min-height: var(--simple-picker-height);\n  max-height: var(--simple-picker-height);\n}\n\n:host([block-label]) {\n  display: block;\n  margin: 0 0 15px;\n  max-height: unset;\n}\n\n:host([disabled]) {\n  --simple-picker-color: var(--simple-picker-color-disabled, #888);\n  --simple-picker-background-color: var(--simple-picker-background-color-disabled, #e8e8e8);\n  cursor: not-allowed;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\ndiv {\n  margin: unset;\n  padding: unset;\n}\n\nlabel:not([hidden]) {\n  display: flex;\n  align-items: center;\n  padding-right: 5px;\n  font-family: var(--simple-picker-font-family, inherit);\n  color: var(--simple-picker-label-color, var(--simple-picker-color, currentColor));\n}\n\n:host([block-label]) label:not([hidden]) {\n  display: block;\n  padding-right: 0px;\n  color: var(--simple-picker-float-label-color, var(--simple-picker-color-disabled, #888));\n  transition: all 0.5s;\n  max-height: unset;\n}\n\n:host([block-label]:focus-within) label,\n:host([block-label]:hover) label {\n  color: var(--simple-picker-float-label-active-color, var(--simple-picker-color, currentColor));\n  transition: all 0.5s;\n}\n\n#sample, \n.rows {\n  margin: 0;\n  padding: 0;\n}\n\n#listbox {\n  cursor: pointer;\n  position: relative;\n  flex: 1 0 auto;\n  min-height: var(--simple-picker-height);\n  max-height: var(--simple-picker-height);\n}\n\n#sample {\n  display: flex;\n  flex: 1 0 auto;\n  justify-content: space-between;\n  align-items: center;\n  min-height: calc(var(--simple-picker-height - 2 * var(--simple-picker-sample-padding, 2px)) - 2 * var(--simple-picker-border-width, 1px));\n  max-height: calc(var(--simple-picker-height - 2 * var(--simple-picker-sample-padding, 2px)) - 2 * var(--simple-picker-border-width, 1px));\n  padding: var(--simple-picker-sample-padding, 2px);\n  border-radius: var(--simple-picker-border-radius, 2px);\n  color: var(--simple-picker-sample-color, currentColor);\n  background-color: var(--simple-picker-background-color, #f0f0f0);\n  border-width: var(--simple-picker-border-width, 1px);\n  border-style: var(--simple-picker-border-style, solid);\n  border-color: var(--simple-picker-border-color, var(--simple-picker-color-disabled, #888));  \n}\n\n:host([hide-sample]) #sample {\n  width: var(--simple-picker-option-size);\n  overflow: visible;\n}\n\n:host(:focus-within) #sample {\n  border-width: var(--simple-picker-focus-border-width, var(--simple-picker-border-width, 1px));\n  border-style: var(--simple-picker-focus-border-style, var(--simple-picker-border-style, solid));\n  border-color: var(--simple-picker-focus-border-color, var(--simple-picker-border-color, var(--simple-picker-color-disabled, #888)));\n  transition: all 0.5s;\n}\n\n:host(:focus-within) #listbox{\n  border-width: var(--simple-picker-listbox-border-width, var(--simple-picker-border-width, 1px));\n  border-style: var(--simple-picker-listbox-border-width, var(--simple-picker-border-style, solid));\n  border-color: var(--simple-picker-listbox-border-width, var(--simple-picker-border-color, var(--simple-picker-color-disabled, #888)));\n}\n\n#listbox:focus-within,\n:host(:focus-within) #listbox{\n  outline: var(--simple-picker-listbox-outline,unset);\n}\n\n#icon {\n  width: var(--simple-picker-icon-size, var(--simple-picker-option-size, 24px));\n  height: var(--simple-picker-icon-size, var(--simple-picker-option-size, 24px));\n  --simple-icon-width: var(--simple-picker-icon-size, var(--simple-picker-option-size, 24px));\n  --simple-icon-height: var(--simple-picker-icon-size, var(--simple-picker-option-size, 24px));\n  transform: var(--simple-picker-icon-transform, rotate(0deg));\n  transition: transform 0.25s;\n}\n\n:host([expanded]) #icon {\n  transform: var(--simple-picker-expanded-icon-transform, rotate(0deg));\n  transition: transform 0.25s;\n}\n\n#collapse {\n  display: none;\n  width: 100%;\n  position: absolute;  \n  z-index: 2;\n}\n\n:host([expanded]:not([disabled])) #collapse {\n  display: block;\n  position: unset;\n  background-color: var(--simple-picker-options-background-color, #fff);\n} \n\n.rows {\n  display: block;\n  position: absolute;\n  z-index: 1000;  \n  top: calc(var(--simple-picker-option-size, 24px) + 2 * var(--simple-picker-options-border-width));\n  border-width: var(--simple-picker-options-border-width, var(--simple-picker-border-width, 1px));\n  border-style: var(--simple-picker-options-border-style, var(--simple-picker-border-style, solid));\n  border-color: var(--simple-picker-options-border-color, var(--simple-picker-border-color, var(--simple-picker-color-disabled, #888)));\n  background-color: var(--simple-picker-options-background-color, #fff);\n  max-height: var(--simple-picker-options-max-height, 250px);\n  overflow-y: auto; \n}\n\n:host([align-right]) #collapse .rows {\n  left: unset;\n  right: calc(var(--simple-picker-options-border-width, var(--simple-picker-border-width, 1px)) *2);\n}\n\n.row {\n  display: flex; \n  align-items: stretch;\n  justify-content: space-between;\n}\n\nsimple-picker-option {\n  z-index: 1;\n  flex: 1 1 auto;\n  justify-content: flex-start;\n  max-height: unset;\n  min-height: var(--simple-picker-option-size, 24px);\n  min-width: var(--simple-picker-option-size, 24px);\n  line-height: var(--simple-picker-option-size, 24px);\n  color: var(--simple-picker-color, currentColor);\n  background-color: var(--simple-picker-options-background-color, #fff);\n  transition: max-height 2s;\n}\n\nsimple-picker-option[selected] {\n  z-index: 50;\n  color: var(--simple-picker-color, currentColor);\n  background-color: var(--simple-picker-option-selected-background-color, var(--simple-picker-options-background-color, #fff));\n}\n\nsimple-picker-option[active] {\n  z-index: 100;\n  cursor: pointer;\n  color: var(--simple-picker-color, currentColor);\n  background-color: var(--simple-picker-option-active-background-color, #aaddff);\n}\n\n#sample simple-picker-option {\n  color: var(--simple-picker-color, currentColor);\n  background-color: var(--simple-picker-sample-background-color, transparent);\n  --simple-picker-option-padding: var(--simple-picker-sample-padding, 2px) 0;\n  border: none;\n}\n\n:host([hide-sample]) #sample simple-picker-option {\n  position: absolute;\n  left: -9999px;\n  overflow: hidden;\n  width: 0;\n  height: 0;\n}\n\n:host(:focus-within) #sample simple-picker-option,\n:host(:hover) #sample simple-picker-option {\n  --simple-picker-color: var(--simple-picker-color-active, var(--simple-picker-color, currentColor));\n}\n\n:host(:not([expanded])) #collapse simple-picker-option {\n  max-height: 0;\n  transition: max-height 1.5s;\n}\n\n@media screen and (max-width: 600px) {\n  :host {\n    position: static;\n  }\n\n  #collapse {\n    top: 0;\n    margin-top: 0;\n    position: relative;\n  } \n\n  .rows {\n    position: absolute;\n  }  \n}\n      "]);return z=function(){return e},e}function L(){var e=k(['\n\n<label id="listLabel" for="listbox" .hidden="','">\n  ','\n</label>\n<div id="listbox"\n  .aria-activedescendant="','" \n  .aria-labelledby="','" \n  .disabled="','"\n  role="listbox" \n  tabindex="0"\n  @click="','"\n  @mousedown="','"\n  @keydown="','">\n  <div id="sample">\n    <simple-picker-option \n      ?hide-option-labels="','"\n      ?title-as-html="','"\n      .icon="','"\n      .label="','"\n      .style=','\n      aria-hidden="true">\n    </simple-picker-option>\n    <span id="icon"><simple-icon-lite aria-hidden="true" icon="arrow-drop-down"></simple-icon-lite></span>\n  </div>\n  <div id="collapse">\n    <div class="rows">\n        ',"\n    </div>\n  </div>\n</div>"]);return L=function(){return e},e}window.customElements.define(w.tag,w);var S=function(e){u(i,t.LitElement);var n=f(i);function i(){var e;l(this,i),(e=n.call(this)).tag=i.tag,e.allowNull=!1,e.alignRight=!1,e.ariaLabelledby=null,e.blockLabel=!1,e.disabled=!1,e.expanded=!1,e.hideOptionLabels=!1,e.hideSample=!1,e.label=null,e.__options=[[]],e.options=[[{icon:null,style:null,alt:null,value:null}]],e.titleAsHtml=!1,e.value=null,e.__activeDesc="option-0-0",e.__hasLabel=!0,e.__selectedOption={},e.addEventListener("blur",function(e){this.expanded=!1});var t=i.properties;for(var o in t)t.hasOwnProperty(o)&&(e.hasAttribute(o)?e[o]=e.getAttribute(o):(o.reflect&&e.setAttribute(o,t[o].value),e[o]=t[o].value));return e}return a(i,[{key:"render",value:function(){return t.html(L(),!this.label||""===this.label.trim(),this.label&&""!==this.label.trim()?this.label.trim():"",this.__activeDesc,this.ariaLabelledby,this.disabled,this._handleListboxClick,this._handleListboxMousedown,this._handleListboxKeydown,this.hideOptionLabels,this.titleAsHtml,!!this.__selectedOption&&this.__selectedOption.icon,!!this.__selectedOption&&this.__selectedOption.alt,!!this.__selectedOption&&this.__selectedOption.style,o.cache(this.expanded&&this.__options?this._renderOptions(this.__options):r.nothing))}}],[{key:"styles",get:function(){return[t.css(z())]}},{key:"properties",get:function(){return d(d({},b(h(i),"properties",this)),{},{allowNull:{type:Boolean,reflect:!0,attribute:"allow-null"},alignRight:{type:Boolean,reflect:!0,attribute:"align-right"},ariaLabelledby:{type:String,attribute:"aria-labelledby"},blockLabel:{type:Boolean,reflect:!0,attribute:"block-label"},disabled:{type:Boolean,reflect:!0},expanded:{type:Boolean,reflect:!0,attribute:"expanded"},hideOptionLabels:{type:Boolean,reflect:!0,attribute:"hide-option-labels"},hideSample:{type:Boolean,reflect:!0,attribute:"hide-sample"},label:{type:String},options:{type:Array},titleAsHtml:{type:Boolean,attribute:"title-as-html"},value:{type:String,reflect:!0},__activeDesc:{type:String},__options:{type:Array},__selectedOption:{type:Object}})}},{key:"tag",get:function(){return"simple-picker"}}]),a(i,[{key:"_renderOptions",value:function(e){var n=this;return t.html(C(),e.map(function(e,i){return t.html(E(),Array.isArray(e)?n._renderRow(e,i):r.nothing)}))}},{key:"_renderRow",value:function(e,n){var i=this;return t.html(j(),e.map(function(e,o){return t.html(O(),i._handleOptionFocus,i._handleSetSelectedOption,"".concat(i.__activeDesc)==="option-".concat(n,"-").concat(o),i.hideOptionLabels,!i.allowNull&&!e.value,i.value===e.value,i.titleAsHtml,i.data,e.icon,n,o,e.alt,e.style,i.value===e.value?"true":"false",e.value)}))}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){"value"===n&&t._valueChanged(),"options"===n&&t._optionsChanged()}),this.dispatchEvent(new CustomEvent("changed",{detail:this}))}},{key:"_getOption",value:function(e,t){if(void 0!==e&&null!=t){var n=t.split("-");return e[n[1]][n[2]]}return null}},{key:"_goToOption",value:function(e,n){var i=t.html(x(),e,n),o=this.shadowRoot.querySelector("#"+i),r=this.shadowRoot.querySelector("#"+this.__activeDesc);null!==o&&(o.tabindex=0,o.focus(),r.tabindex=-1)}},{key:"_handleListboxClick",value:function(e){this.dispatchEvent(new CustomEvent("click",{detail:this})),this._toggleListbox()}},{key:"_handleListboxMousedown",value:function(e){this.dispatchEvent(new CustomEvent("mousedown",{detail:this}))}},{key:"_handleListboxKeydown",value:function(e){this.dispatchEvent(new CustomEvent("keydown",{detail:this}));var t=this.__activeDesc.split("-"),n=parseInt(t[1]),i=parseInt(t[2]);if(32===e.keyCode)e.preventDefault(),this._toggleListbox();else if(this.expanded&&[9,35,36,38,40].includes(e.keyCode))if(e.preventDefault(),35===e.keyCode){var o=(this.options||[]).length-1,r=this.options[o].length-1;this._goToOption(o,r)}else 36===e.keyCode?this._goToOption(0,0):38===e.keyCode?i>0?this._goToOption(n,i-1):n>0&&this._goToOption(n-1,this.options[n-1].length-1):40===e.keyCode&&(i<this.options[n].length-1?this._goToOption(n,i+1):n<(this.options||[]).length-1&&this._goToOption(n+1,[0]))}},{key:"_handleOptionFocus",value:function(e){this._setActiveOption(e.detail.id)}},{key:"_setActiveOption",value:function(e){this.__activeDesc=e,this.dispatchEvent(new CustomEvent("option-focus",{detail:this}))}},{key:"_valueChanged",value:function(){this._setSelectedOption(),this.dispatchEvent(new CustomEvent("value-changed",{detail:this}))}},{key:"_optionsChanged",value:function(){this._setSelectedOption()}},{key:"_setSelectedOption",value:function(){var e=!this.allowNull&&(this.options||[]).length>0&&this.options[0].length>0?this.options[0][0].value:null;if(this.options){this.__options="string"==typeof this.options?JSON.parse(this.options):this.options.slice(),this.__activeDesc=this.allowNull?"option-0-0":null;for(var t=0;t<this.__options.length;t++)for(var n=0;n<this.__options[t].length;n++)null!==this.value&&null===this.__activeDesc&&(this.__activeDesc="option-".concat(t,"-").concat(n)),"".concat(this.__options[t][n].value)==="".concat(this.value)&&(this.__activeDesc="option-".concat(t,"-").concat(n),e=this.__options[t][n])}null===e&&(this.value=null),this.__selectedOption=e,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this}))}},{key:"_toggleListbox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.expanded;if(!this.disabled){var t=this.shadowRoot.querySelector("#"+this.__activeDesc);this.expanded=e,e?(null!==t&&t.focus(),this.dispatchEvent(new CustomEvent("expand",{detail:this}))):(null!==t&&(this.value=t.getAttribute("value")),this.dispatchEvent(new CustomEvent("collapse",{detail:this})))}}},{key:"setOptions",value:function(e){this.set("options",[[]]),this.set("options",e)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("blur",function(e){this.expanded=!1}),b(h(i.prototype),"disconnectedCallback",this).call(this)}}]),i}();window.customElements.define(S.tag,S),e.SimplePicker=S,Object.defineProperty(e,"__esModule",{value:!0})});
