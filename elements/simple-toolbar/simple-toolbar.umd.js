!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lit-element"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js")):"function"==typeof define&&define.amd?define(["exports","lit-element","@lrnwebcomponents/responsive-utility/responsive-utility.js","lit-element/lit-element.js","@lrnwebcomponents/simple-tooltip/simple-tooltip.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"],e):e((t=t||self).SimpleToolbar={},t.litElement,null,t.litElement_js)}(this,function(t,e,n,o){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function g(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function m(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _(){var t=g(['\n          :host([hidden]) {\n            display: none;\n          }\n          #button {\n            min-width: var(--simple-toolbar-button-min-width, 24px);\n            height: var(--simple-toolbar-button-height, 24px);\n            margin: var(--simple-toolbar-button-margin, 3px);\n            padding: var(--simple-toolbar-button-padding, 0);\n            color: var(--simple-toolbar-button-color);\n            border-color: var(--simple-toolbar-border-color, transparent);\n            background-color: var(--simple-toolbar-button-bg, transparent);\n            border-width: 0px;\n            border-style: solid;\n            text-transform: unset;\n            transition: all 0.5s;\n          }\n          #button[aria-pressed="true"] {\n            color: var(--simple-toolbar-button-toggled-color);\n            border-color: var(--simple-toolbar-toggled-border-color, #ddd);\n            background-color: var(\n              --simple-toolbar-button-toggled-bg,\n              rgba(0, 0, 0, 0.1)\n            );\n          }\n          #button:focus,\n          #button:hover {\n            color: var(--simple-toolbar-button-hover-color);\n            background-color: var(--simple-toolbar-button-hover-bg);\n          }\n          #button[disabled] {\n            cursor: not-allowed;\n            color: var(--simple-toolbar-button-disabled-color, unset);\n            background-color: var(--simple-toolbar-button-disabled-bg, unset);\n          }\n        ']);return _=function(){return t},t}function k(){var t=g(["\n          simple-tooltip {\n            z-index: 2;\n          }\n        "]);return k=function(){return t},t}function w(){var t=g(["\n          #icon:not([icon]) {\n            display: none;\n          }\n        "]);return w=function(){return t},t}function S(){var t=g(["\n          #label {\n            position: absolute;\n            left: -999999px;\n            top: 0;\n            height: 0;\n            width: 0;\n            overflow: hidden;\n          }\n        "]);return S=function(){return t},t}function x(){var t=g([' <button\n              id="button"\n              class="simple-toolbar-button"\n              ?disabled="','"\n              ?controls="','"\n              @click="','"\n              tabindex="0"\n            >\n              '," ","\n            </button>\n            ",""]);return x=function(){return t},t}function j(){var t=g([' <button\n              id="button"\n              aria-pressed="','"\n              class="simple-toolbar-button"\n              ?disabled="','"\n              ?controls="','"\n              @click="','"\n              tabindex="0"\n            >\n              '," ","\n            </button>\n            ",""]);return j=function(){return t},t}function O(){var t=g(['<simple-tooltip id="tooltip" for="button"\n        >',"</simple-tooltip\n      >"]);return O=function(){return t},t}function T(){var t=g(['<span id="label" class="','"\n        >',"</span\n      >"]);return T=function(){return t},t}function B(){var t=g(['<simple-icon-lite\n        id="icon"\n        aria-hidden="true"\n        icon="','"\n      ></simple-icon-lite>']);return B=function(){return t},t}function E(){var t=g(["",""]);return E=function(){return t},t}var L=function(t){return function(e){p(r,t);var n=h(r);function r(){var t;return i(this,r),(t=n.call(this)).disabled=!1,t.showTextLabel=!1,t.toggles=!1,t}return s(r,null,[{key:"tag",get:function(){return"simple-toolbar-button"}},{key:"properties",get:function(){return{controls:{type:String},disabled:{type:Boolean},icon:{type:String},label:{type:String},shortcutKeys:{attribute:"shortcut-keys",type:String},showTextLabel:{attribute:"show-text-label",type:Boolean},target:{type:Object},toggledIcon:{attribute:"toggled-icon",type:String},toggledLabel:{attribute:"toggled-label",type:String},toggles:{type:Boolean},toggled:{attribute:"toggled",type:Boolean}}}}]),s(r,[{key:"updated",value:function(t){var e=this;y(b(r.prototype),"updated",this).call(this,t),t.forEach(function(t,n){"shortcutKeys"==n&&e.dispatchEvent(new CustomEvent("change-shortcut-keys",{bubbles:!0,cancelable:!0,composed:!0,detail:{button:e,shortcutKeys:t}}))})}},{key:"connectedCallback",value:function(){y(b(r.prototype),"connectedCallback",this).call(this),this.dispatchEvent(new CustomEvent("register-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"disconnectedCallback",value:function(){this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),y(b(r.prototype),"disconnectedCallback",this).call(this)}},{key:"_defaultOrToggled",value:function(t,e){return e&&this.isToggled?e:t}},{key:"_handleClick",value:function(t){this.toggle()}},{key:"toggle",value:function(){this.toggles&&(this.toggled=!this.toggled)}},{key:"render",value:function(){return o.html(E(),this.buttonTemplate)}},{key:"button",get:function(){return this.__button||(this.__button=this.shadowRoot&&this.shadowRoot.querySelector("#toolbar")?this.shadowRoot.querySelector("#toolbar"):void 0),this.__button}},{key:"currentLabel",get:function(){return this._defaultOrToggled(this.label,this.toggledLabel,this.isToggled)}},{key:"currentIcon",get:function(){return this._defaultOrToggled(this.icon,this.toggledIcon,this.isToggled)}},{key:"labelStyle",get:function(){return this.icon&&""!==this.icon&&!1===this.showTextLabel?"offscreen":null}},{key:"isToggled",get:function(){return this.toggles&this.toggled}},{key:"iconTemplate",get:function(){return o.html(B(),this.currentIcon)}},{key:"labelTemplate",get:function(){return o.html(T(),this.labelStyle,this.currentLabel)}},{key:"tooltipTemplate",get:function(){return o.html(O(),this.currentLabel)}},{key:"buttonTemplate",get:function(){return this.toggles?o.html(j(),this.isToggled?"true":"false",this.disabled,this.controls,this._handleClick,this.iconTemplate,this.labelTemplate,this.tooltipTemplate):o.html(x(),this.disabled,this.controls,this._handleClick,this.iconTemplate,this.labelTemplate,this.tooltipTemplate)}}],[{key:"labelStyles",get:function(){return[o.css(S())]}},{key:"iconStyles",get:function(){return[o.css(w())]}},{key:"tooltipStyles",get:function(){return[o.css(k())]}},{key:"buttonStyles",get:function(){return[o.css(_())]}},{key:"styles",get:function(){return console.log(this.buttonStyles),[].concat(m(y(b(r),"styles",this)||[]),m(this.buttonStyles),m(this.iconStyles),m(this.labelStyles),m(this.tooltipStyles))}}]),r}()},P=function(t){p(n,L(o.LitElement));var e=h(n);function n(){return i(this,n),e.apply(this,arguments)}return n}();window.customElements.define(P.tag,P);var K=function(t){p(n,L(o.LitElement));var e=h(n);function n(){var t;return i(this,n),(t=e.call(this)).icon="more-vert",t.collapseMax="xs",t.toggled=!1,t.toggles=!0,t.label="More buttons",t.labelToggled="Fewer buttons",console.log("constructor"),t}return s(n,null,[{key:"tag",get:function(){return"simple-toolbar-more-button"}}]),s(n,null,[{key:"properties",get:function(){return a(a({},y(b(n),"properties",this)),{},{collapseMax:{attribute:"collapse-max",type:String,reflect:!0}})}}]),n}();function A(){var t=g(["\n          :host {\n            display: flex;\n            align-items: flex-start;\n            opacity: 1;\n            z-index: 2;\n            margin: 0;\n            justify-content: space-between;\n            background-color: var(--rich-text-editor-bg);\n            border: var(--rich-text-editor-border);\n            font-size: 12px;\n            transition: all 0.5s;\n          }\n          :host([hidden]) {\n            z-index: -1;\n            visibility: hidden;\n            opacity: 0;\n            height: 0;\n          }\n          :host([sticky]) {\n            position: sticky;\n            top: 0;\n          }\n          #buttons {\n            display: flex;\n            align-items: stretch;\n            flex-wrap: wrap;\n            justify-content: flex-start;\n            max-height: unset;\n            flex: 1 1 auto;\n          }\n          #buttons.collapsed {\n            max-height: calc(2px + var(--simple-toolbar-button-height, 24px));\n            overflow: hidden;\n          }\n          #morebutton {\n            flex: 0 0 auto;\n            justify-content: flex-end;\n          }\n          .group {\n            display: flex;\n            flex-wrap: nowrap;\n            justify-content: space-evenly;\n            align-items: stretch;\n            padding: 0 3px;\n          }\n          .group:not(:last-of-type) {\n            margin-right: 3px;\n            border-right: var(--rich-text-editor-border);\n          }\n          .button {\n            display: flex;\n            flex: 0 0 auto;\n            align-items: stretch;\n          }\n        "]);return A=function(){return t},t}function C(){var t=g(['\n        <div id="buttons" class="','">\n          <slot></slot>\n        </div>\n        ',"\n      "]);return C=function(){return t},t}function R(){var t=g([' <simple-toolbar-more-button\n        id="morebutton"\n        aria-controls="buttons"\n        class="button"\n        @click="','"\n        icon="','"\n        label="','"\n        ?label-toggled="','"\n        ?show-text-label="','"\n        ?toggled="','"\n      >\n      </simple-toolbar-more-button>']);return R=function(){return t},t}window.customElements.define(K.tag,K);var I=function(t){return function(n){p(l,t);var o=h(l);function l(){var t;return i(this,l),t=o.call(this),window.ResponsiveUtility.requestAvailability(),t.collapsed=!0,t.config=[],t.__focused=!1,t.__hovered=!1,t.moreIcon="more-vert",t.moreLabel="More Buttons",t.moreLabelToggled="Fewer Buttons",t.moreShowTextLabel=!1,t.responsiveSize="xs",t.sticky=!1,t.shortcutKeys=[],t.setAttribute("aria-live","polite"),t.onfocus=function(e){return t.__focused=!0},t.onblur=function(e){return t.__focused=!1},t.onmouseover=function(e){return t.__hovered=!0},t.onmouseout=function(e){return t.__hovered=!1},t.addEventListener("register-button",function(e){return t._registerButtonShortcuts(e.detail)}),t.addEventListener("deregister-button",function(e){return t._deregisterButtonShortcuts(e.detail)}),t.addEventListener("change-shortcut-keys",function(e){return t._updateButtonShortcuts(e.detail,e.detail?e.detail.button:void 0)}),t.updateToolbar(),t}return s(l,[{key:"tag",value:function(){return"simple-toolbar"}},{key:"render",value:function(){return console.log("render"),this.toolbarTemplate}},{key:"buttons",get:function(){return this.__buttons}},{key:"focused",get:function(){return this.__focused}},{key:"hovered",get:function(){return this.__hovered}},{key:"moreButton",get:function(){var t=this;return console.log("moreButton"),e.html(R(),function(e){return t.collapsed=!t.collapsed},this.moreIcon,this.moreLabel,this.moreLabelToggled,this.moreShowTextLabel,!this.collapsed)}},{key:"toolbarTemplate",get:function(){return console.log("toolbarTemplate"),e.html(C(),this.collapsed?"collapsed":"",this.moreButton)}}],[{key:"baseStyles",get:function(){return[e.css(A())]}},{key:"styles",get:function(){return m(this.baseStyles)}},{key:"properties",get:function(){return{collapsed:{name:"collapsed",type:Boolean,attribute:"collapsed",reflect:!0},config:{name:"config",type:Array,attribute:"config"},id:{name:"id",type:String,attribute:"id",reflect:!0},moreIcon:{name:"moreIcon",type:String,attribute:"more-icon"},moreLabel:{name:"moreLabel",type:String,attribute:"more-label"},moreLabelToggled:{name:"moreLabelToggled",type:String,attribute:"more-label-toggled",value:"Fewer Buttons"},moreShowTextLabel:{name:"moreShowTextLabel",type:Boolean,attribute:"more-show-text-label"},responsiveSize:{name:"responsiveSize",type:String,attribute:"responsive-size",reflect:!0},shortcutKeys:{name:"shortcutKeys",type:Object},sticky:{name:"sticky",type:Boolean,attribute:"sticky",reflect:!0},__buttons:{name:"__buttons",type:Array},__focused:{name:"__focused",type:Boolean},__hovered:{name:"__hovered",type:Boolean}}}}]),s(l,[{key:"firstUpdated",value:function(t){console.log("firstUpdated"),y(b(l.prototype),"firstUpdated",this)&&y(b(l.prototype),"firstUpdated",this).call(this,t),this.updateToolbar()}},{key:"updated",value:function(t){var e=this;y(b(l.prototype),"updated",this)&&y(b(l.prototype),"updated",this).call(this,t),t.forEach(function(t,n){"config"===n&&e.updateToolbar(),"hidden"===n&&e.setAttribute("aria-hidden",e.hidden?"true":"false")})}},{key:"addButton",value:function(t,e){console.log("add",t,e);var n=this._renderButton(t);return(e=e||this).appendChild(n),n}},{key:"addButtonGroup",value:function(t,e){var n=this;console.log("addButtonGroup",t,e);var o=this._renderButtonGroup(t);return console.log("add group",t.buttons,e,o),(e||this).appendChild(o),t.buttons.forEach(function(t){return n.addButton(t,o)}),o}},{key:"clearToolbar",value:function(){this.innerHTML="",this.shortcutKeys={},this.__buttons=[]}},{key:"updateToolbar",value:function(){var t=this;this&&(this.clearToolbar(),r(this.config)!=r([])&&(this.config=JSON.parse(config)),this.config.forEach(function(e){console.log("foreach",e.type),"button-group"===e.type?t.addButtonGroup(e,t):t.addButton(e,t)}))}},{key:"_registerButtonShortcuts",value:function(t){t.shortcutKeys&&(this.shortcutKeys[t.shortcutKeys]=t),this.__buttons.push(t),this.__buttons=m(new Set(this.__buttons)),console.log(this,this.buttons,this.shortcutKeys)}},{key:"_updateButtonShortcuts",value:function(t,e){t&&this._deregisterButtonShortcuts(t),e&&this._registerButtonShortcuts(e)}},{key:"_deregisterButtonShortcuts",value:function(t){t.shortcutKeys&&delete this.shortcutKeys[t.shortcutKeys],this.__buttons=this.__buttons.filter(function(e){return e!==t}),console.log(this,this.buttons,this.shortcutKeys)}},{key:"_renderButton",value:function(t){var e=document.createElement(t.type);return Object.keys(t).forEach(function(n){return e[n]=t[n]}),e.setAttribute("class","button"),e.addEventListener("button-command",this._handleButton),e}},{key:"_renderButtonGroup",value:function(t){console.log("_renderButtonGroup",t);var e=document.createElement("div");return e.setAttribute("class","group"),Object.keys(t).forEach(function(n){return e[n]=t[n]}),e}}]),l}()},q=function(t){p(o,I(e.LitElement));var n=h(o);function o(){return i(this,o),n.apply(this,arguments)}return o}();customElements.define("simple-toolbar",q),t.SimpleToolbar=q,Object.defineProperty(t,"__esModule",{value:!0})});
