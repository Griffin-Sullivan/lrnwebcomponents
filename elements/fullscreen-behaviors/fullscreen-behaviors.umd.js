!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lit"),require("@lrnwebcomponents/es-global-bridge/es-global-bridge.js")):"function"==typeof define&&define.amd?define(["exports","lit","@lrnwebcomponents/es-global-bridge/es-global-bridge.js"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).FullscreenBehaviors={},e.lit)}(this,(function(e,n){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n&&l(e.prototype,n),t&&l(e,t),e}function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&c(e,n)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function f(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=u(e);if(n){var l=u(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return a(this,t)}}function d(e,n,t){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var r=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=u(e)););return e}(e,n);if(r){var l=Object.getOwnPropertyDescriptor(r,n);return l.get?l.get.call(t):l.value}})(e,n,t||e)}var b,p=function(e){i(l,e);var n=f(l);function l(){var e;if(r(this,l),(e=n.call(this)).__callbacks=[],e.__loaded=!1,e.__fullscreen=!1,"object"===("undefined"==typeof screenfull?"undefined":t(screenfull)))e._setLoaded();else{var o=new URL("./","undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("fullscreen-behaviors.umd.js",document.baseURI).href).href,i="".concat(o,"screenfull/dist/screenfull.js");window.ESGlobalBridge.requestAvailability().load("screenfullLib",i),window.addEventListener("es-bridge-screenfullLib-loaded",e._setLoaded.bind(s(e)))}return e}return o(l,[{key:"enabled",get:function(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return"object"===("undefined"==typeof screenfull?"undefined":t(screenfull))&&screenfull.isEnabled&&!e}},{key:"fullscreen",get:function(){return this.__fullscreen}},{key:"disconnectedCallback",value:function(){window.removeEventListener("es-bridge-screenfullLib-loaded",this._setLoaded.bind(this)),d(u(l.prototype),"disconnectedCallback",this).call(this)}},{key:"_setLoaded",value:function(e){this.__loaded=!0,(this.__callbacks||[]).forEach((function(e){return e()}))}}],[{key:"tag",get:function(){return"fullscreen-behaviors-manager"}},{key:"properties",get:function(){return{__loaded:{type:Boolean},__callbacks:{type:Array},__fullscreen:{type:Boolean}}}}]),l}(n.LitElement);window.customElements.define(p.tag,p),window.FullscreenBehaviorsManager=window.FullscreenBehaviorsManager||{},window.FullscreenBehaviorsManager.requestAvailability=function(){return window.FullscreenBehaviorsManager.instance||(window.FullscreenBehaviorsManager.instance=document.createElement("fullscreen-behaviors-manager"),document.body.appendChild(window.FullscreenBehaviorsManager.instance)),window.FullscreenBehaviorsManager.instance};var h=function(e){return function(e){i(l,e);var t=f(l);function l(){var e;if(r(this,l),(e=t.call(this)).__fullscreen=!1,e.__fullscreenEnabled=e.fullscreenManager&&e.fullscreenManager.enabled,e.fullscreenManager.__loaded)e._updateEnabled();else{window.addEventListener("es-bridge-screenfullLib-loaded",function n(){e._updateEnabled(),window.removeEventListener("es-bridge-screenfullLib-loaded",n.bind(s(e)))}.bind(s(e)))}return e}return o(l,[{key:"render",value:function(){return n.html(b||(e=[" <slot></slot> "],t||(t=e.slice(0)),b=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))));var e,t}},{key:"disconnectedCallback",value:function(){screenfull.off("change",this._updateFullscreen.bind(this)),d(u(l.prototype),"disconnectedCallback",this).call(this)}},{key:"fullscreenManager",get:function(){return window.FullscreenBehaviorsManager.requestAvailability()}},{key:"fullscreenTarget",get:function(){return this}},{key:"fullscreenEnabled",get:function(){return this.__fullscreenEnabled}},{key:"_updateFullscreen",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:screenfull&&screenfull.isFullscreen,t=function(n){setTimeout(e._updateFullscreen(),500)};this.__fullscreen=n,this.__fullscreen?document.addEventListener("fullscreenchange",t.bind(this)):document.removeEventListener("fullscreenchange",t.bind(this))}},{key:"_updateEnabled",value:function(){var e=this;this.__fullscreenEnabled=this.fullscreenManager&&this.fullscreenManager.enabled,screenfull&&screenfull.isEnabled&&screenfull.on("change",(function(n){return e._updateFullscreen.bind(e)}))}},{key:"toggleFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!screenfull.isFullscreen;this.fullscreenEnabled&&screenfull&&(e?screenfull.request(this.fullscreenTarget):screenfull.exit(this.fullscreenTarget),this._updateFullscreen(e))}}],[{key:"properties",get:function(){return{__fullscreen:{type:Boolean,attribute:"fullscreen"},__fullscreenEnabled:{type:Boolean,attribute:"fullscreen-enabled"}}}},{key:"tag",get:function(){return"fullscreen-behaviors"}}]),l}(e)},y=function(e){i(t,e);var n=f(t);function t(){return r(this,t),n.apply(this,arguments)}return t}(h(n.LitElement));window.customElements.define(y.tag,y),e.FullscreenBehaviors=h,e.FullscreenBehaviorsEl=y,Object.defineProperty(e,"__esModule",{value:!0})}));
