!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-button.js"),require("@lrnwebcomponents/simple-icon/simple-icon.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/utils/utils.js"),require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu.js"),require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu-item.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js")):"function"==typeof define&&define.amd?define(["exports","lit-element/lit-element.js","@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-button.js","@lrnwebcomponents/simple-icon/simple-icon.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/utils/utils.js","@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu.js","@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu-item.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"],t):t((e=e||self).SimpleFields={},e.litElement_js,null,null,null,e.utils_js)}(this,function(e,t,n,i,r,o){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return b(this,n)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(){var e=y(['\n    fieldset {\n      padding: var(--simple-fields-margin-small, 8px)\n        var(--simple-fields-margin, 16px);\n      margin: var(--simple-fields-margin-small, 8px) 0\n        var(--simple-fields-margin, 16px);\n      border-width: 1px;\n      border-style: solid;\n      border-color: var(\n        --simple-fields-fieldset-border-color,\n        var(--simple-fields-border-color-light, #ccc)\n      );\n      border-radius: var(--simple-fields-border-radius, 2px);\n      transition: all 0.3s ease-in-out;\n      max-width: calc(100% - 2 * var(--simple-fields-margin, 16px) - 2px);\n    }\n    :host(:last-of-type) {\n      margin-bottom: 0;\n    }\n    *[part="legend"] {\n      font-family: var(--simple-fields-font-family, sans-serif);\n      font-size: var(\n        --simple-fields-legend-font-size,\n        var(--simple-fields-font-size, 16px)\n      );\n      line-height: var(--simple-fields-line-height, 22px);\n      text-transform: var(--simple-fields-legend-text-transform, unset);\n    }\n    :host([error]) *[part="legend"] {\n      color: var(--simple-fields-error-color, #b40000);\n      transition: all 0.3s ease-in-out;\n    }\n  ']);return _=function(){return e},e}function w(){var e=y(['\n    *[part="field-desc"],\n    *[part="error-desc"],\n    *[part="error-meta"] {\n      color: var(--simple-fields-meta-color);\n      font-size: var(--simple-fields-meta-font-size, 10px);\n      line-height: var(--simple-fields-meta-line-height, 110%);\n      opacity: var(--simple-fields-meta-opacity, unset);\n      text-transform: none;\n    }\n    :host:hover *[part="field-desc"],\n    :host:hover-within *[part="error-desc"],\n    :host:hover-within *[part="error-meta"],\n    :host:hover *[part="field-desc"],\n    :host:hover *[part="error-desc"],\n    :host:hover *[part="error-meta"] {\n      color: var(--simple-fields-focus-meta-color);\n      opacity: var(--simple-fields-focus-meta-opacity, unset);\n    }\n  ']);return w=function(){return e},e}function E(){var e=y(['\n    button,\n    button[aria-selected],\n    simple-toolbar-button::part(button),\n    simple-toolbar-menu::part(button) {\n      color: var(--simple-fields-button-color, var(--simple-fields-color));\n      background-color: var(\n        --simple-fields-button-background-color,\n        var(--simple-fields-background-color)\n      );\n      border-width: 1px;\n      border-style: solid;\n      border-color: var(\n        --simple-fields-button-border-color,\n        var(--simple-fields-border-color, #999)\n      );\n      opacity: var(--simple-fields-button-focus-opacity, 1);\n      font-family: var(\n        --simple-fields-button-font-family,\n        var(--simple-fields-font-family, sans-serif)\n      );\n      font-size: var(--simple-fields-button-font-size, 14px);\n      line-height: var(--simple-fields-button-line-height 22px);\n      text-transform: var(--simple-fields-button-text-transform, unset);\n      border-radius: var(--simple-fields-border-radius, 2px);\n      padding: var(--simple-fields-button-padding-sm, 1px)\n        var(--simple-fields-button-padding, 2px);\n      min-height: calc(\n        24px + 2 * var(--simple-fields-button-padding-sm, 2px) + 2px\n      );\n    }\n    simple-toolbar-menu-item > simple-toolbar-button::part(button) {\n      border-color: transparent;\n      border-radius: 0 !important;\n    }\n    simple-toolbar-button.danger::part(button),\n    simple-toolbar-menu.danger::part(button) {\n      background-color: var(\n        --simple-fields-button-danger-color,\n        var(--simple-fields-error-color, #b40000)\n      );\n      color: var(--simple-fields-button-danger-background-color, white);\n    }\n    button[aria-pressed="true"],\n    button[aria-selected="true"],\n    simple-toolbar-button[toggled]::part(button) {\n      color: var(\n        --simple-fields-button-toggled-color,\n        var(--simple-fields-accent-color, #3f51b5)\n      );\n      background-color: var(\n        --simple-fields-button-toggled-background-color,\n        unset\n      );\n      border-color: var(\n        --simple-fields-button-toggled-border-color,\n        var(--simple-fields-color, currentColor)\n      );\n      opacity: var(--simple-fields-button-toggled-opacity, 1);\n    }\n    simple-toolbar-menu-item\n      > simple-toolbar-button.danger:hover::part(button[aria-pressed="true"]),\n    simple-toolbar-menu-item\n      > simple-toolbar-button.danger:focus-within::part(button[aria-pressed="true"]) {\n      background-color: var(\n        --simple-fields-button-danger-color,\n        var(--simple-fields-error-color, #b40000)\n      );\n      color: var(--simple-fields-button-danger-background-color, white);\n      border-color: var(--simple-fields-button-danger-focus-color, #8a0000);\n    }\n    button:focus,\n    button:hover,\n    button[aria-selected="false"]:not([disabled]):focus,\n    button[aria-selected="false"]:not([disabled]):hover,\n    simple-toolbar-button:focus-within::part(button),\n    simple-toolbar-button:hover::part(button),\n    simple-toolbar-menu:focus-within::part(button),\n    simple-toolbar-menu:hover::part(button),\n    simple-toolbar-menu-item > simple-toolbar-button:hover::part(button),\n    simple-toolbar-menu-item\n      > simple-toolbar-button:focus-within::part(button) {\n      color: var(--simple-fields-button-focus-color, unset);\n      background-color: var(\n        --simple-fields-button-focus-background-color,\n        var(--simple-fields-accent-color-light, #d9eaff)\n      );\n      border-color: var(\n        --simple-fields-button-focus-border-color,\n        var(--simple-fields-accent-color, #3f51b5)\n      );\n      opacity: var(--simple-fields-button-focus-opacity, 1);\n      text-decoration: var(--simple-fields-button-focus-text-decoration, unset);\n    }\n    simple-toolbar-menu.danger:focus-within::part(button),\n    simple-toolbar-menu.danger:hover::part(button),\n    simple-toolbar-menu-item > simple-toolbar-button.danger:hover::part(button),\n    simple-toolbar-menu-item\n      > simple-toolbar-button.danger:focus-within::part(button) {\n      background-color: var(--simple-fields-button-danger-focus-color, #8a0000);\n      color: var(--simple-fields-button-danger-background-color, white);\n      border-color: var(--simple-fields-button-danger-focus-color, #8a0000);\n    }\n    button:disabled,\n    button[disabled],\n    simple-toolbar-button[disabled],\n    simple-toolbar-menu[disabled] {\n      color: var(--simple-fields-button-disabled-color, unset);\n      background-color: var(\n        --simple-fields-button-disabled-background-color,\n        unset\n      );\n      border-color: var(--simple-fields-button-disabled-border-color, unset);\n      opacity: var(\n        --simple-fields-button-disabled-opacity,\n        var(--simple-fields-disabled-opacity, 0.7)\n      );\n    }\n  ']);return E=function(){return e},e}function S(){var e=y(["\n    simple-tooltip,\n    simple-toolbar-button::part(tooltip) {\n      text-transform: var(--simple-fields-tooltip-text-transform, unset);\n      font-family: var(\n        --simple-fields-detail-font-family,\n        var(--simple-fields-font-family, sans-serif)\n      );\n      font-size: var(\n        --simple-fields-tooltip-font-size,\n        var(--simple-fields-detail-font-size, 12px)\n      );\n      line-height: var(\n        --simple-fields-tooltip-line-height,\n        var(--simple-fields-detail-line-height, 22px)\n      );\n      border-radius: var(\n        --simple-fields-border-radius,\n        var(--simple-fields-tooltip-border-radius, 2px)\n      );\n    }\n  "]);return S=function(){return e},e}function A(){var e=y(['\n    :host .label-main:after {\n      content: var(--simple-fields-label-flag, "");\n    }\n    :host([focused]) .label-main,\n    :host(:focus-within) .label-main {\n      color: var(--simple-fields-accent-color, #3f51b5);\n      transition: color 0.3s ease-in-out;\n    }\n    .inline {\n      --simple-fields-radio-option-display: flex;\n      --simple-fields-radio-option-flex-wrap: wrap;\n    }\n    label {\n      margin: 0 0 0 0;\n    }\n    .inline label {\n      margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n      flex: 0 1 var(--simple-fields-label-width, auto);\n    }\n    .inline label,\n    .field-main > div,\n    .field,\n    ::slotted([slot="field"]) {\n      font-size: var(--simple-fields-font-size, 16px);\n      text-align: var(--simple-fields-text-align);\n      font-family: var(--simple-fields-font-family, sans-serif);\n      line-height: var(--simple-fields-line-height, 22px);\n    }\n  ']);return A=function(){return e},e}function C(){var e=y(['\n    :host {\n      visibility: visible;\n      box-sizing: border-box;\n      display: block;\n      margin: 0 0 var(--simple-fields-margin, 16px);\n      padding: 0;\n      font-size: var(--simple-fields-font-size);\n      font-family: var(--simple-fields-font-family, sans-serif);\n      line-height: var(--simple-fields-line-height);\n      font-size: var(--simple-fields-detail-font-size, 12px);\n      font-family: var(--simple-fields-detail-font-family, sans-serif);\n      line-height: var(--simple-fields-detail-line-height, 130%);\n      background-color: var(--simple-fields-background-color, white);\n      color: var(--simple-fields-color, currentColor);\n      margin: 0 0\n        var(--simple-fields-field-margin, var(--simple-fields-margin, 16px));\n    }\n    :host([hidden]),\n    :host [hidden],\n    :host([type="hidden"]) {\n      display: none !important;\n    }\n  ']);return C=function(){return e},e}var j=[t.css(C())],O=[t.css(A())],P=[t.css(S())],F=[].concat(P,[t.css(E())]),T=[t.css(w())],L=[t.css(_())];function z(){var e=y(['\n        <slot name="suffix"></slot>\n        ',"\n      "]);return z=function(){return e},e}function q(){var e=y(['\n        <slot name="prefix"></slot>\n        ',"\n      "]);return q=function(){return e},e}function B(){var e=y(['\n        <label\n          for="','"\n          class="label-main"\n          ?hidden="','"\n          part="label"\n        >\n          <slot name="label-prefix"></slot>\n          <slot name="label"></slot>\n          ',"","\n        </label>\n      "]);return B=function(){return e},e}function M(){var e=y(['\n        <div id="fieldmeta" aria-live="polite" part="field-meta">\n          <slot name="field-meta"></slot>\n        </div>\n      ']);return M=function(){return e},e}function I(){var e=y(['\n        <div\n          class="','"\n          part="field-main"\n        >\n          ','\n          <div part="field-inner">\n            ','\n            <slot name="field"></slot>\n            ',"\n          </div>\n        </div>\n      "]);return I=function(){return e},e}function R(){var e=y(['\n        <div class="border-bottom blur"></div>\n        <div class="border-bottom focus"></div>\n        <div id="field-bottom" part="field-bottom">\n          <div id="error-desc" part="field-bottom-inner">\n            '," ","\n          </div>\n          ","\n        </div>\n      "]);return R=function(){return e},e}function V(){var e=y(['\n        <div\n          id="error-message"\n          ?hidden="','"\n          role="alert"\n          part="error-msg"\n        >\n          ',"\n        </div>\n      "]);return V=function(){return e},e}function N(){var e=y(['\n        <div id="description" part="field-desc">\n          <slot name="description"></slot>\n          ',"\n        </div>\n      "]);return N=function(){return e},e}function W(){var e=y(['\n          :host {\n            display: block;\n          }\n          :host([error]) {\n            color: var(--simple-fields-error-color, #b40000);\n            transition: color 0.3s ease-in-out;\n          }\n          :host([disabled]) {\n            color: var(--simple-fields-disabled-color, #999);\n          }\n          .field-main.inline,\n          .field-main > div,\n          #field-bottom {\n            display: flex;\n            align-items: stretch;\n            justify-content: flex-start;\n          }\n          * {\n            flex: 1 1 auto;\n          }\n          #fieldmeta {\n            text-align: right;\n          }\n          .field,\n          ::slotted([slot="field"]) {\n            width: auto;\n            border: none;\n            color: var(--simple-fields-color, currentColor);\n            background-color: var(\n              --simple-fields-background-color,\n              transparent\n            );\n            transition: opacity ease-in-out;\n            flex: 1 0 auto;\n          }\n          ::slotted([slot="field"]:focus) {\n            outline: none;\n          }\n          :host[inline] ::slotted([slot="field"]:focus),\n          ::slotted([type="checkbox"][slot="radio"]:focus),\n          ::slotted([type="checkbox"][slot="field"]:focus) {\n            outline: unset;\n          }\n          .field-main.inline .field,\n          .field-main.inline ::slotted([slot="field"]) {\n            min-width: var(--simple-fields-detail-line-height, 22px);\n            height: var(--simple-fields-detail-line-height, 22px);\n            margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n          }\n          .field[disabled],\n          :host([readonly]) ::slotted([slot="field"]) {\n            opacity: var(--simple-fields-disabled-opacity, 0.7);\n            transition: opacity ease-in-out;\n          }\n          .field[readonly],\n          .field[disabled],\n          :host([readonly]) ::slotted([slot="field"]),\n          :host([disabled]) ::slotted([slot="field"]) {\n            cursor: not-allowed;\n            pointer-events: none;\n          }\n          .border-bottom {\n            height: 0;\n          }\n          :host([disabled]) .border-bottom {\n            border-bottom: 1px dashed var(--simple-fields-border-color, #999);\n          }\n          .border-bottom.blur {\n            border-bottom: 1px solid var(--simple-fields-border-color, #999);\n            width: 100%;\n          }\n          .border-bottom.focus {\n            margin: -1px auto 0;\n            width: 0;\n            border-bottom: 2px solid var(--simple-fields-accent-color, #3f51b5);\n            transition: width 0.5s ease-in-out;\n          }\n          :host(:focus-within) .border-bottom.focus {\n            width: 100%;\n            transition: width 0.5s ease-in-out;\n          }\n          :host([type="checkbox"]) .border-bottom,\n          :host([type="color"]) .border-bottom,\n          :host([type="file"]) .border-bottom,\n          :host([type="radio"]) .border-bottom,\n          :host([type="range"]) .border-bottom {\n            display: none;\n          }\n          ::slotted(input) {\n            padding: 0px;\n          }\n          ::slotted(textarea[slot="field"]) {\n            margin: 0;\n            transition: height 0.5s ease-in-out;\n            box-sizing: border-box;\n            vertical-align: bottom;\n          }\n          ::slotted(fieldset[slot="field"]) {\n            margin: 0;\n            padding: 0;\n            border: none;\n            font-size: var(--simple-fields-font-size, 16px);\n            font-family: var(--simple-fields-font-family, sans-serif);\n            line-height: var(--simple-fields-line-height, 22px);\n            display: var(--simple-fields-radio-option-display, block);\n            flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n            transition: color 0.3s ease-in-out;\n          }\n        ']);return W=function(){return e},e}function D(){var e=y([" "," "," "]);return D=function(){return e},e}var U=function(e){return function(n){f(r,e);var i=g(r);function r(){var e;return s(this,r),(e=i.call(this)).counter="none",e.autovalidate=!1,e.disabled=!1,e.hidden=!1,e.error=!1,e.id=e._generateUUID(),e.inline=!1,e.validTypes=["checkbox","color","date","datetime-local","email","file","fieldset","hidden","month","number","password","radio","range","search","select","tel","text","textarea","time","url","week"],e._observeAndListen(),e.addEventListener("click",e.focus),e}return d(r,[{key:"render",value:function(){return t.html(D(),this.fieldMainTemplate,this.fieldBottom)}}],[{key:"tag",get:function(){return"simple-fields-container"}},{key:"styles",get:function(){return[].concat(k(j),k(O),k(T),[t.css(W())])}},{key:"properties",get:function(){return{autovalidate:{type:Boolean},counter:{type:String},description:{type:String},disabled:{type:Boolean,reflect:!0},defaultErrorMessage:{type:String},defaultRequiredMessage:{type:String},error:{type:Boolean,reflect:!0},errorMessage:{type:String},hidden:{type:Boolean,reflect:!0},field:{type:Object},id:{type:String,reflect:!0},inline:{type:Boolean,reflect:!0},label:{type:String},minchecked:{type:Number},maxchecked:{type:Number},maxwords:{type:Number},name:{type:String,reflect:!0},numberMessage:{type:String},pattern:{type:String},patternMessage:{type:String},prefix:{type:String},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},requiredMessage:{type:String},suffix:{type:String},type:{type:String},validTypes:{type:Array},value:{type:Object},__delayedFocus:{type:Boolean}}}}]),d(r,[{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this.focus),v(m(r.prototype),"disconnectedCallback",this).call(this)}},{key:"autoGrow",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.field;this.field&&(this.field.style.height="auto",this.field.style.height="".concat(this.field.scrollHeight,"px"),this.field.style.overflowY="hidden")}},{key:"firstUpdated",value:function(e){v(m(r.prototype),"firstUpdated",this)&&v(m(r.prototype),"firstUpdated",this).call(this,e),this._updateField()}},{key:"updated",value:function(e){var t=this,n=!1;e.forEach(function(e,i){"error"===i&&t.error!==e&&(n=!0),"errorMessage"===i&&t.errorMessage!==e&&(n=!0),"error"===i&&t.field&&t.field.setAttribute("aria-invalid",t.error?"true":"false")}),n&&this._fireErrorChanged()}},{key:"focus",value:function(){this.field?(this.field.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}},{key:"select",value:function(){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.select()}},{key:"setRangeText",value:function(e,t,n,i){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setRangeText(e,t,n,i)}},{key:"setSelectionRange",value:function(e,t,n){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setSelectionRange(e,t,n)}},{key:"stepDown",value:function(){this.field&&this.numeric&&this.field.stepDown()}},{key:"stepUp",value:function(){this.field&&this.numeric&&this.field.stepUp()}},{key:"validate",value:function(){var e=this.field.querySelector("legend");return this.requiredError?(this.error=!0,this.errorMessage=this.requiredMessage||"required"):this.numberError?(this.error=!0,this.errorMessage=this.numberMessage||(this.numberError>0?"select ".concat(this.numberError," more"):"select ".concat(0-this.numberError," fewer"))):this.patternError&&(this.error=!0,this.errorMessage=this.patternMessage||"invalid format"),this.hasFieldset&&e&&(e.innerHTML=e.innerHTML.replace(/\**\s*$/,this.error?"*":""),e.style.color=this.error?"var(--simple-fields-error-color, #b40000)":""),!this.error}},{key:"_fireErrorChanged",value:function(){this.dispatchEvent(new CustomEvent("error-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_generateUUID",value:function(){return"ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}},{key:"_getFieldsetValue",value:function(){var e,t;return this.field.querySelector("input[type=radio]")?(e=this.field.querySelector("input:checked"),t=e?e.value:void 0):this.field.querySelector("input[type=checkbox]")&&(t=[],(e=this.field.querySelectorAll("input:checked")).forEach(function(e){return t.push(e.value)})),t}},{key:"_getFieldValue",value:function(){var e,t=this;return this.field&&(e=this.hasFieldset?this._getFieldsetValue():"checkbox"===this.type?!!this.field.checked:"radio"===this.type?!!this.field.checked:"select"===this.type?this.multiple?Object.keys(this.field.selectedOptions).map(function(e){return t.field.selectedOptions[e].value}):this.field.selectedOptions[0].value:this.field.value),e}},{key:"_getValidType",value:function(e){return"datetime"===e&&this.validTypes.includes(e)?"datetime-local":this.validTypes.includes(e)?e:"text"}},{key:"_handleFieldChange",value:function(){"text"!==this.type&&"textarea"!==this.type||this._updateCount(),this.autovalidate&&this.validate(),this.value=this._getFieldValue(),"textarea"===this.type&&this.autoGrow()}},{key:"_observeAndListen",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.slottedFieldObserver.observe(this,{attributeFilter:["disabled","readonly","required","slot"],childlist:!0}),this._updateField(),this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.slottedFieldObserver.disconnect(),this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}},{key:"_onFocusin",value:function(){this.error=!1}},{key:"_onFocusout",value:function(){this.autovalidate&&this.validate()}},{key:"_updateField",value:function(){var e=this.field;if(this.field=this.querySelector&&this.querySelector("[slot=field]")?this.querySelector("[slot=field]"):void 0,this.id="".concat(this.fieldId||"","-wrapper"),this.field){var t=this.field.tagName.toLowerCase(),n=this.field.getAttribute("type")||"text";if(this.type=this._getValidType("input"===t?n:t),this.required=this.field.required,this.disabled=this.field.disabled,this.readonly=this.field.readonly,this.field.setAttribute("aria-describedby","field-bottom"),this.addEventListener("change",this._handleFieldChange),this.addEventListener("input",this._handleFieldChange),"select"===this.type&&(this.multiple=this.field.multiple),"textarea"===this.type&&(this.field.getAttribute("rows")||this.field.setAttribute("rows",1),this.field.addEventListener("keydown",function(e){return e.stopPropagation()})),"fieldset"===this.type){var i=this.querySelector("legend");i&&(i.style.fontSize="var(--simple-fields-detail-font-size, 12px)",i.style.fontFamily="var(--simple-fields-detail-font-family, sans-serif)",i.style.lineHeight="var(--simple-fields-detail-line-height, 22px)",i.style.paddingInlineStart=0,i.style.paddingInlineEnd=0),this.querySelectorAll("label, input").forEach(function(e){return e.style.marginRight="var(--simple-fields-margin, 16px)"}),this.querySelectorAll("label input").forEach(function(e){return e.style.marginLeft="calc(0 - var(--simple-fields-margin, 16px))"})}}else this.disabled=!1,this.readonly=!1,this.required=!1,this.type=void 0,e&&("textarea"===e.tagName.toLowerCase()&&e.addEventListener("keydown",function(e){return e.stopPropagation()}),e.removeEventListener("change",this._handleFieldChange),e.removeEventListener("input",this._handleFieldChange));this.field&&this.__delayedFocus&&this.focus()}},{key:"_updateCount",value:function(){var e,t=this,n=new RegExp("[\\w\\-\\']+","gim"),i=this.field.getAttribute("maxlength")||this.maxlength||!1,r=this.maxwords||!1,o="word"===this.counter?r:i,l=new RegExp(".{0,".concat(i||1,"}"),"g"),s=new RegExp("(".concat("[\\w\\-\\']+","\\W*){0,").concat(r||1,"}"),"g"),a=function(e){return((t.field||{}).value||"").match(e)},d=function(){return t.field.value?t.field.value.length:0},u=function(){return t.field&&t.field.value&&a(n)?a(n).length:0},c=function(e,n,i){e&&n&&n<e&&t.field.value.match(i)&&(t.field.value=a(i)[0].trim())};c(d(),i,l),c(u(),r,s),e="word"===this.counter?u():d(),"none"!==this.counter&&this.shadowRoot&&this.shadowRoot.querySelector("#fieldmeta")&&(this.shadowRoot.querySelector("#fieldmeta").innerHTML=o?"".concat(e,"/").concat(o):e)}},{key:"descriptionTemplate",get:function(){return t.html(N(),this.description)}},{key:"errorTemplate",get:function(){return t.html(V(),!this.error,this.errorMessage)}},{key:"fieldBottom",get:function(){return t.html(R(),this.descriptionTemplate,this.errorTemplate,this.fieldMeta)}},{key:"fieldId",get:function(){return"".concat(this.id||"field",".input")}},{key:"fieldMainTemplate",get:function(){return t.html(I(),this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main",this.labelTemplate,this.prefixTemplate,this.suffixTemplate)}},{key:"fieldMeta",get:function(){return t.html(M())}},{key:"hasFieldset",get:function(){return"fieldset"===this.type}},{key:"labelTemplate",get:function(){return t.html(B(),this.fieldId,"fieldset"===this.type,this.label,this.error||this.required?"*":"")}},{key:"multicheck",get:function(){return this.hasFieldset&&this.field.querySelector("input[type=checkbox]")}},{key:"numberError",get:function(){var e=!!this._getFieldValue()&&this._getFieldValue().length,t="select"===this.type?this.min:!!this.multicheck&&this.minchecked,n="select"===this.type?this.max:!!this.multicheck&&this.maxchecked;return n&&e&&n<e?n-e:!!(t&&e&&t>e)&&t-e}},{key:"numeric",get:function(){return["date","month","week","time","datetime-local","number","range"].includes(this.type)}},{key:"patternError",get:function(){var e=this;return this.pattern&&""!==this.pattern&&this._getFieldValue()&&(this.field.multiple?this._getFieldValue().filter(function(t){return!t.match(e.pattern)}):!this._getFieldValue().match(this.pattern))}},{key:"prefixTemplate",get:function(){return t.html(q(),this.prefix)}},{key:"requiredError",get:function(){return!this._getFieldValue()&&this.required}},{key:"slottedFieldObserver",get:function(){return new MutationObserver(this._updateField)}},{key:"suffixTemplate",get:function(){return t.html(z(),this.suffix)}}]),r}()},H=function(e){f(i,U(t.LitElement));var n=g(i);function i(){return s(this,i),n.apply(this,arguments)}return i}();function $(){var e=y(["\n          :host(:last-of-type) {\n            margin-bottom: 0;\n          }\n        "]);return $=function(){return e},e}function G(){var e=y(['\n        <div id="item-fields" part="fields">\n          <slot></slot>\n        </div>\n      ']);return G=function(){return e},e}function J(){var e=y(['\n        <div id="description" ?hidden="','" part="description">\n          ',"\n        </div>\n      "]);return J=function(){return e},e}function Y(){var e=y(['\n        <legend id="label" ?hidden="','" part="legend">\n          ',"","\n        </legend>\n      "]);return Y=function(){return e},e}function K(){var e=y(['\n        <fieldset part="fieldset">\n          '," "," ","\n        </fieldset>\n      "]);return K=function(){return e},e}window.customElements.define(H.tag,H);var Q=function(e){return function(n){f(r,e);var i=g(r);function r(){return s(this,r),i.apply(this,arguments)}return d(r,[{key:"render",value:function(){return t.html(K(),this.legend,this.desc,this.fields)}},{key:"legend",get:function(){return t.html(Y(),!this.label,this.label,this.error?"*":"")}},{key:"desc",get:function(){return t.html(J(),!this.description,this.description)}},{key:"fields",get:function(){return t.html(G())}}],[{key:"tag",get:function(){return"simple-fields-fieldset"}},{key:"styles",get:function(){return[].concat(k(j),k(L),k(T),[t.css($())])}},{key:"properties",get:function(){return{disabled:{type:Boolean,reflect:!0},error:{type:Boolean,reflect:!0},hidden:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},label:{type:String,reflect:!0},name:{type:String,reflect:!0,attribute:"name"},description:{type:String}}}}]),r}()},X=function(e){f(i,Q(t.LitElement));var n=g(i);function i(){return s(this,i),n.apply(this,arguments)}return i}();function Z(){var e=y(['\n        :host {\n          padding: 0;\n          border-radius: var(--simple-fields-border-radius, 2px);\n          display: block;\n          border: none;\n          transform: rotate(0deg);\n          transition: all 0.5s ease;\n          z-index: 1;\n          position: relative;\n        }\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n        :host([aria-expanded="true"]) {\n          padding: var(--simple-fields-margin, 16px)\n            var(--simple-fields-margin-small, 8px);\n          outline: 1px solid var(--simple-fields-border-color-light, #ccc);\n          transition: all 0.5s ease;\n        }\n        :host([error]) {\n          outline: 1px solid var(--simple-fields-error-color, #b40000);\n          transition: border 0.5s ease;\n        }\n        *[aria-controls="content"][disabled] {\n          cursor: not-allowed;\n        }\n        #drag-handle {\n          flex: 0 1 auto;\n          position: relative;\n          overflow: visible;\n        }\n        #preview {\n          flex: 1 0 auto;\n          margin: 0;\n          margin-right: calc(0 - var(--simple-fields-margin-small, 8px) / 2);\n          margin-left: calc(50px + var(--simple-fields-margin-small, 8px) / 2);\n          max-width: calc(\n            100% - 72px - 2 * var(--simple-fields-margin-small, 8px) / 2\n          );\n        }\n        #heading,\n        .heading-inner {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n        }\n        #content {\n          overflow: hidden;\n          max-height: 0;\n        }\n        :host #content-inner {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n          flex-wrap: wrap;\n          overflow: hidden;\n          max-height: 0;\n          transition: max-height 0.75s ease 0.1s;\n        }\n        :host([aria-expanded="true"]) #content {\n          max-height: 20000vh;\n          transition: max-height 0.75s ease 0.1s;\n        }\n        :host([aria-expanded="true"]) #content-inner {\n          max-height: 20000vh;\n        }\n        #content-inner > * {\n          flex: 1 1 auto;\n        }\n        #copy-delete {\n          display: flex;\n          align-items: stretch;\n          justify-content: flex-end;\n          flex: 1 0 auto;\n        }\n        #copy,\n        #remove {\n          flex: 0 0 auto;\n        }\n        #expand {\n          margin-left: calc(var(--simple-fields-margin-small, 8px) / 2);\n        }\n        #drag-handle {\n          position: absolute;\n          left: 2px;\n          top: 2px;\n          --simple-toolbar-button-white-space: normal !important;\n        }\n        :host([aria-expanded="true"]) #drag-handle {\n          top: var(--simple-fields-margin, 16px);\n          left: var(--simple-fields-margin-small, 8px);\n        }\n        #dropzone {\n          height: 0px;\n        }\n        :host(.dragging) #heading {\n          opacity: 0.5;\n        }\n        :host(.dragging) #content,\n        :host(.dragging) #expand {\n          display: none;\n        }\n        #content:hover,\n        #content:focus-within,\n        #content:hover #content-inner,\n        #content:focus-within #content-inner {\n          overflow: visible;\n        }\n        :host(.dragging) #preview,\n        :host(.droppable) #preview {\n          margin-left: calc(var(--simple-fields-margin-small, 8px) / 2);\n        }\n        :host(.dropzone) #dropzone {\n          background-color: var(\n            --simple-fields-button-focus-background-color,\n            var(--simple-fields-accent-color-light, #d9eaff)\n          );\n          height: 80px;\n        }\n\n        :host([aria-expanded="true"]) #expand::part(icon) {\n          transform: rotate(90deg);\n          transition: all 0.5s ease;\n        }\n        ::slotted([slot="preview"]),\n        ::slotted(*:first-child) {\n          margin-top: 0;\n        }\n        ::slotted([slot="preview"]),\n        ::slotted(*:last-child) {\n          margin-bottom: 0;\n        }\n        :host(:hover),\n        :host(:focus),\n        :host(:focus-within) {\n          z-index: 100000;\n        }\n        :host(.dropzone) {\n          z-index: 1;\n        }\n        [hidden],\n        :host(:first-child) #move-up-outer,\n        :host(:last-child) #move-down-outer,\n        :host(:first-child):last-child #drag-handle {\n          display: none;\n        }\n      ']);return Z=function(){return e},e}function ee(){var e=y(['\n      <div id="dropzone"></div>\n      <simple-toolbar-menu\n        id="drag-handle"\n        controls="','"\n        icon="icons:reorder"\n        label="Reorder this item"\n        ?disabled="','"\n        ?hidden="','"\n        part="drag"\n        tooltip-direction="right"\n        @mousedown="','"\n        @mouseup="','"\n      >\n        <simple-toolbar-menu-item id="move-up-outer">\n          <simple-toolbar-button\n            id="move-up"\n            align-horizontal="left"\n            role="menuitem"\n            icon="arrow-upward"\n            show-text-label\n            label="Up"\n            @click="','"\n          >\n          </simple-toolbar-button>\n        </simple-toolbar-menu-item>\n        <simple-toolbar-menu-item id="move-down-outer">\n          <simple-toolbar-button\n            align-horizontal="left"\n            id="move-up"\n            role="menuitem"\n            icon="arrow-downward"\n            show-text-label\n            label="Down"\n            @click="','"\n          >\n          </simple-toolbar-button>\n        </simple-toolbar-menu-item>\n      </simple-toolbar-menu>\n      <div id="heading" part="heading" .item="','">\n        <div id="preview" part="preview"><slot name="preview"></slot></div>\n        <simple-toolbar-button\n          id="expand"\n          controls="','"\n          icon="more-vert"\n          label="Toggle expand"\n          @click="','"\n          toggles\n          ?toggled="','"\n          part="expand"\n          tooltip-direction="left"\n        >\n        </simple-toolbar-button>\n      </div>\n      <div id="content" part="content">\n        <div id="content-inner" part="content-inner">\n          <div><slot></slot></div>\n          <div id="copy-delete">\n            <simple-toolbar-button\n              id="copy"\n              controls="','"\n              icon="content-copy"\n              label="Copy this item"\n              ?disabled="','"\n              @click="','"\n              part="copy"\n              tooltip-direction="left"\n            >\n            </simple-toolbar-button>\n            <simple-toolbar-menu\n              id="remove"\n              icon="delete"\n              label="Remove this item"\n              ?disabled="','"\n              fit-to-visible-bounds\n              part="remove"\n              position-align="end"\n              tooltip-direction="left"\n            >\n              <simple-toolbar-menu-item>\n                <simple-toolbar-button\n                  id="confirm-remove"\n                  class="danger"\n                  align-horizontal="left"\n                  role="menuitem"\n                  show-text-label\n                  controls="','"\n                  icon="delete"\n                  label="Remove"\n                  ?disabled="','"\n                  @click="','"\n                  part="confirm-remove"\n                >\n                </simple-toolbar-button>\n              </simple-toolbar-menu-item>\n            </simple-toolbar-menu>\n          </div>\n        </div>\n      </div>\n    ']);return ee=function(){return e},e}window.customElements.define(X.tag,X);var te=function(e){f(i,Q(t.LitElement));var n=g(i);function i(){var e;return s(this,i),(e=n.call(this)).disabled=!1,e.draggable="truest",e.previewBy=[],e.addEventListener("dragenter",e._dragEnter),e.addEventListener("dragleave",e._dragLeave),e.addEventListener("dragover",e._dragMoving),e.addEventListener("dragstart",e._dragStart),e.addEventListener("dragend",e._dragEnd),e.addEventListener("drop",e._dragDrop),e}return d(i,[{key:"render",value:function(){var e=this;return t.html(ee(),this.id,this.disabled,this.__dropAccepts||this.__dragging,function(t){return e.draggable="true"},function(t){return e.draggable="false"},this._moveUp,this._moveDown,this,this.id,this.toggle,this.expanded,(this.parentNode||{}).id,this.disabled,this._handleCopy,this.disabled,this.id,this.disabled,this._handleRemove)}}],[{key:"styles",get:function(){return[].concat(k(v(m(i),"styles",this)),k(F),[t.css(Z())])}},{key:"tag",get:function(){return"simple-fields-array-item"}},{key:"properties",get:function(){return{expanded:{type:Boolean},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},draggable:{type:String,reflect:!0},preview:{type:Boolean},previewBy:{type:Array,reflect:!0,attribute:"preview-by"},__dragging:{type:Boolean},__dropAccepts:{type:Object},__prev:{type:Object},__next:{type:Object}}}}]),d(i,[{key:"_dragMoving",value:function(e){this.__dragMoving=!0,e.preventDefault()}},{key:"_dragEnd",value:function(e){k(this.parentNode.childNodes).forEach(function(e){return e._setDropzone(!1)}),this._setDragging(!1)}},{key:"_dragStart",value:function(e){var t=this.shadowRoot.querySelector("#heading");e.dataTransfer.setDragImage(t,0,0),this._setDragging(),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"_dragEnter",value:function(e){this._setDropzone()}},{key:"_dragLeave",value:function(e){this._setDropzone(!1)}},{key:"_dragDrop",value:function(e){this._moveBefore(e,this.__dropAccepts,this)}},{key:"_moveUp",value:function(e){var t=this.previousElementSibling;t&&this._moveBefore(e,this,t)}},{key:"_moveDown",value:function(e){var t=this.nextElementSibling;t&&this._moveBefore(e,this,t.nextElementSibling)}},{key:"_moveBefore",value:function(e,t,n){!this.parentNode.disabled&&t&&(n?this.parentNode.insertBefore(t,n):this.parentNode.append(t),k(this.parentNode.childNodes).forEach(function(e){e._setDragging(!1),e._setDragging(!1)}),this.dispatchEvent(new CustomEvent("reorder",{bubbles:!0,cancelable:!0,composed:!0,detail:this.parentNode})))}},{key:"_setDragging",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.parentNode.disabled||(this.__dragging=t),t?(k(this.parentNode.childNodes).forEach(function(t){t!==e&&(t.__dropAccepts=e,t.classList.add("droppable"))}),this.classList.add("dragging")):(k(this.parentNode.childNodes).forEach(function(t){t!==e&&(t.__dropAccepts=void 0,t.classList.remove("droppable"))}),this.classList.remove("dragging"))}},{key:"_setDropzone",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!this.__dragging&&this.__dropAccepts?this.classList.add("dropzone"):this.classList.remove("dropzone")}},{key:"connectedCallback",value:function(){var e=this;v(m(i.prototype),"connectedCallback",this).call(this),setTimeout(function(){e.dispatchEvent(new CustomEvent("added",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))},0)}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){var i=t.getAttribute("aria-expanded");"error"===n&&t.setAttribute("aria-expanded",t.error||i)})}},{key:"toggle",value:function(){"true"===this.getAttribute("aria-expanded")?this.setAttribute("aria-expanded","false"):this.setAttribute("aria-expanded","true")}},{key:"_handleCopy",value:function(){this.dispatchEvent(new CustomEvent("copy",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleRemove",value:function(){this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"disconnectedCallback",value:function(){this.dispatchEvent(new CustomEvent("removed",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),v(m(i.prototype),"disconnectedCallback",this).call(this)}},{key:"slots",get:function(){var e={};return this.previewBy.forEach(function(t){return e[t]="preview"}),e}}]),i}();function ne(){var e=y(["\n        :host([expanded]) #expand::part(icon) {\n          transform: rotate(90deg);\n          transition: all 0.5s ease;\n        }\n        #item-fields {\n          margin: var(--simple-fields-margin-small, 8px) 0;\n          clear: both;\n          z-index: 3;\n        }\n        #top {\n          display: flex;\n          align-items: flex-end;\n          justify-content: flex-end;\n        }\n        #add {\n          float: right;\n        }\n      "]);return ne=function(){return e},e}function ie(){var e=y(['\n      <div id="top" part="top">\n        ','\n        <simple-toolbar-button\n          id="expand"\n          controls="item-fields"\n          icon="more-vert"\n          @click="','"\n          ?toggled="','"\n          toggles\n          show-text-label\n          label="','"\n          part="expand"\n        >\n        </simple-toolbar-button>\n      </div>\n      <div id="item-fields" aria-live="polite" part="items">\n        <slot></slot>\n        <simple-toolbar-button\n          id="add"\n          icon="add"\n          controls="item-fields"\n          @click="','"\n          part="add"\n          icon="more-vert"\n          ?toggled="','"\n          toggles\n          show-text-label\n          label="Add Item"\n        >\n        </simple-toolbar-button>\n      </div>\n    ']);return ie=function(){return e},e}function re(){var e=y(['\n      <fieldset part="fieldset">',"","</fieldset>\n    "]);return re=function(){return e},e}window.customElements.define(te.tag,te);var oe=function(e){f(i,Q(t.LitElement));var n=g(i);function i(){var e;return s(this,i),(e=n.call(this)).count=0,e.expanded=!1,e.disableAdd=!1,e}return d(i,[{key:"render",value:function(){return t.html(re(),this.legend,this.fields)}},{key:"fields",get:function(){var e=this;return t.html(ie(),this.descriptionTemplate,function(t){return e.toggle()},this.expanded,this.expanded?"Collapse All":"Expand All",function(t){return e._handleAdd()},this.expanded)}}],[{key:"tag",get:function(){return"simple-fields-array"}},{key:"styles",get:function(){return[].concat(k(v(m(i),"styles",this)),k(F),[t.css(ne())])}},{key:"properties",get:function(){return p(p({},v(m(i),"properties",this)),{},{count:{type:Number},expanded:{type:Boolean,reflect:!0},__dragging:{type:Boolean}})}}]),d(i,[{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){"expanded"===n&&t.querySelectorAll("simple-fields-array-item").forEach(function(e){return e.setAttribute("aria-expanded",t.expanded)})})}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("simple-fields-array-item");return n.id=e,n.expanded=this.expanded,n.innerHTML='\n      <slot name="sort"></slot>\n      <slot name="preview"></slot>\n      <slot></slot>',this.appendChild(n),n.addEventListener("remove",function(e){return t._handleRemove(e)}),n}},{key:"_handleAdd",value:function(){this.dispatchEvent(new CustomEvent("add",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleRemove",value:function(e){e.stopPropagation(),e.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail}))}},{key:"collapse",value:function(){this.toggle(!1)}},{key:"expand",value:function(){this.toggle(!0)}},{key:"focus",value:function(e){if(this.childNodes&&e)this.childNodes.length<e&&(e=this.childNodes.length-1),-1==e&&(e=0),0!=this.childNodes.length&&this.childNodes[e].focus();else if(this.shadowRoot){var t=this.childNodes?"expand":"add";this.shadowRoot.getElementById(t).focus()}}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.expanded;this.expanded=e,this._handleToggle()}},{key:"_handleToggle",value:function(){this.dispatchEvent(new CustomEvent("toggle",{detail:this})),this.expanded?this.dispatchEvent(new CustomEvent("expand",{bubbles:!0,cancelable:!0,composed:!0,detail:this})):this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}}]),i}();function le(){var e=y(["\n        :host {\n          display: block;\n          font-family: var(\n            --simple-fields-detail-font-family,\n            var(--simple-fields-font-family, sans-serif)\n          );\n          font-size: var(\n            --simple-fields-detail-font-size,\n            var(--simple-fields-font-size, 12px)\n          );\n          background: var(--simple-fields-background-color, transparent);\n        }\n        :host([hidden]) {\n          display: none;\n        }\n      "]);return le=function(){return e},e}function se(){var e=y(['\n      <div id="schema-fields" aria-live="polite" part="fields-list">\n        <slot></slot>\n      </div>\n    ']);return se=function(){return e},e}window.customElements.define(oe.tag,oe);var ae=function(e){f(i,t.LitElement);var n=g(i);function i(){var e;return s(this,i),e=n.call(this),window.WCGlobalBasePath?e.basePath=window.WCGlobalBasePath:e.basePath=e.pathFromUrl(decodeURIComponent("undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("simple-fields.umd.js",document.baseURI).href))+"../../../",e.disableAutofocus=!1,e.language="en",e.resources={},e.schemaConversion,e.__formElements={},e.__formElementsArray=[],e.schema={},e.value={},e}return d(i,[{key:"render",value:function(){return t.html(se())}}],[{key:"styles",get:function(){return[t.css(le())]}},{key:"properties",get:function(){return p(p({},v(m(i),"properties",this)),{},{disableAutofocus:{type:Boolean},error:{type:Object},language:{type:String,attribute:"lang",reflect:!0},resources:{type:Object},schema:{type:Object},elementizer:{type:Object,attribute:"elementizer",reflect:!0},value:{type:Object},__delayedFocus:{type:Boolean},__formElements:{type:Object},__formElementsArray:{type:Array}})}},{key:"tag",get:function(){return"simple-fields-lite"}}]),d(i,[{key:"disconnectedCallback",value:function(){this._clearForm(),v(m(i.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function(e){var t=this;v(m(i.prototype),"updated",this)&&v(m(i.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"error"===n&&t.error!==e&&t._errorChanged(),["schema","schemaConversion"].includes(n)&&t._schemaChanged(t.schema,e),"value"===n&&t._valueChanged(t.value,e)})}},{key:"updateSchema",value:function(){this._formFieldsChanged()}},{key:"focus",value:function(){var e=!!(this.__formElementsArray&&this.__formElementsArray[0]&&this.__formElementsArray[0].field)&&this.__formElementsArray[0].field;e?(e.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}},{key:"rebuildForm",value:function(){this._clearForm(),this._addToForm();var e=!!(this.__formElementsArray&&this.__formElementsArray[0]&&this.__formElementsArray[0].field)&&this.__formElementsArray[0].field;e&&(e.autofocus=!this.disableAutofocus),!this.__delayedFocus&&this.disableAutofocus||this.focus(),this.dispatchEvent(new CustomEvent("fields-ready",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"pathFromUrl",value:function(e){return e.substring(0,e.lastIndexOf("/")+1)}},{key:"_addToForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.schema,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,o=t.properties,s=t.required;Object.keys(o||{}).forEach(function(a){var d=o[a],u=r||e._convertSchema(d);if(u&&u.element){var c="".concat(i).concat(a),p=document.createElement(u.element),f=d.properties||d.items||d.noWrap||u.noWrap?p:document.createElement("simple-fields-container"),m=e._getValue("".concat(i).concat(a));!window.customElements.get(u.element)&&u.import?import("".concat(e.basePath).concat(u.import)):window.customElements.get(u.element)||console.warn("missing field: ".concat(u.element));var h=d.label||d.title||d.description||a,b=d.description&&(d.label||d.title)?d.description:void 0,g=(d.onValueChanged,d.onErrorChanged);u.labelSlot=t.labelSlot||u.labelSlot,u.descriptionSlot=t.descriptionSlot||u.descriptionSlot,u.errorMessageSlot=t.errorMessageSlot||u.errorMessageSlot,u.valueSlot=t.valueSlot||u.valueSlot,u.labelProperty=t.labelProperty||u.labelProperty||"label",u.descriptionProperty=t.descriptionProperty||u.descriptionProperty||"description",u.valueProperty=t.valueProperty||u.valueProperty||"value",u.setValueProperty=t.setValueProperty||u.setValueProperty||u.valueProperty,u.valueChangedProperty=t.valueChangedProperty||u.valueChangedProperty||"".concat(u.valueProperty,"-changed"),u.errorProperty=t.errorProperty||u.errorProperty||"error",u.errorChangedProperty=t.errorChangedProperty||u.errorChangedProperty||"".concat(u.errorProperty,"-changed"),u.errorMessageProperty=t.errorMessageProperty||u.errorMessageProperty||"errorMessage",p.resources=e.resources,p.id=c,p.setAttribute("name",c),p.setAttribute("language",e.language),d.options&&(p.options=d.options),d.itemsList&&(p.itemsList=d.itemsList),s&&s.includes(a)&&p.setAttribute("required",!0),d.disabled&&(p.disabled=!0,f.disabled=!0),d.hidden&&(p.hidden=!0,f.hidden=!0),d.readonly&&(p.hidden=!0,f.hidden=!0),e._configElement(f,h,u.labelProperty,u.labelSlot),e._configElement(f,b,u.descriptionProperty,u.descriptionSlot),Object.keys(u.attributes||{}).forEach(function(e){void 0!==l(u.attributes[e])&&null!==u.attributes[e]&&p.setAttribute(e,u.attributes[e])}),Object.keys(u.properties||{}).forEach(function(e){u.properties[e]&&d[e]&&(p[e]=d[e]||u.properties[e])}),Object.keys(u.slots||{}).forEach(function(e){u.slots[e]&&d[u.slots[e]]&&u.slots[e].split(/[\s,]/).forEach(function(t){var n=document.createElement("span");n.slot=e,n.innerHTML=d[t],p.appendChild(n)})}),n.slots&&n.slots[a]&&(f.slot=n.slots[a]),n.appendChild(f),"array"===d.type?e._addArrayItems(m||[],u.child,d,p):d.properties?e._addToForm(d,p,"".concat(p.id,"."),u.child):(p!==f&&(p.slot="field",f.appendChild(p)),"undefined"===l(m)&&"boolean"!==d.type||e._configElement(p,m,u.setValueProperty,u.valueSlot),p.addEventListener(u.valueChangedProperty,function(t){return e._handleChange(p,u.valueProperty,t)}),f.addEventListener(u.errorChangedProperty,function(t){var n=e._deepClone(e.error||{});f[u.errorProperty]?n[c]=f[u.errorMessageProperty]||"":n&&n[c]&&delete n[c],e.error=n,g&&g(t)})),e.__formElementsArray.push({id:c,field:f,data:u}),e.__formElements[c]={element:p,field:f}}})}},{key:"_configElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(i){var r=document.createElement("span");r.slot=i,t&&(r.innerHTML=t),e&&e.querySelectorAll("[slot=".concat(i,"]")).forEach(function(e){return e.remove()}),e.appendChild(r)}else e[n]=t}},{key:"_insertArrayItem",value:function(e,t,n,i,r,o){var l=this._getValue(i.name),s=l?l.length:0;l||this._setValue(i.name,[]),o=o||0===o?o:s;var a={properties:{}};a.properties[o]=this._addArrayItem(o,e,t),this._setValue("".concat(i.name,".").concat(o),r),this._addToForm(a,i,"".concat(i.id,"."),n)}},{key:"_addArrayItems",value:function(e,t,n,i){var r=this,o=Object.keys(n.items.properties||{}),l=n.previewBy||(o.length>0?[o[0]]:void 0);(e||[]).forEach(function(e,o){r._insertArrayItem(n,l,t,i,e,o)}),i.addEventListener("add",function(e){r._insertArrayItem(n,l,t,i,{})}),i.addEventListener("copy",function(e){var o=r._getValue(e.detail.name);r._insertArrayItem(n,l,t,i,o),i.insertBefore(i.lastElementChild,e.detail.nextElementSibling),r._reorderArrayItems(i)}),i.addEventListener("reorder",function(e){r._reorderArrayItems(i)}),i.addEventListener("remove",function(e){var o=e.detail.id,s=r._getValue(i.name)||[],a=o.replace("".concat(i.name,"."),"");s.splice(parseInt(a),1),r.__formElementsArray=r.__formElementsArray.filter(function(e){return 0===e.id.indexOf(i.name)}),i.innerHTML="",s.forEach(function(e,o){return r._insertArrayItem(n,l,t,i,e,o)}),r._setValue("".concat(i.name),s),i.focus(parseInt(a)-1)})}},{key:"_reorderArrayItems",value:function(e){var t=k(this._getValue(e.name)||[]),n=k(e.childNodes),i=[];n.forEach(function(e,n){var r=e.id.replace(/\.\d+$/,""),o=parseInt(e.id.replace(/.*\./g,""));!function e(t,n,i){t.id&&(t.id=t.id.replace(n,i)),t.name&&(t.name=t.name.replace(n,i)),k(t.childNodes).forEach(function(t){return e(t,n,i)})}(e,e.id,"".concat(r,".").concat(n)),i.push(JSON.parse(JSON.stringify(t[o])))}),this._setValue("".concat(e.name),i)}},{key:"_addArrayItem",value:function(e,t,n){var i=this._deepClone(t.items);return i.label="".concat(parseInt(e)+1),i.previewBy=n,i}},{key:"_clearForm",value:function(){this.innerHTML="",this.__formElementsArray=[]}},{key:"_convertSchema",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.schemaConversion,i=arguments.length>2?arguments[2]:void 0,r=Object.keys(e||{}),o=Object.keys(n).filter(function(e){return r.includes(e)});return n.defaultSettings&&(i=this._deepClone(n.defaultSettings)),o.forEach(function(r){var o=e[r],l=n?n[r]:void 0,s=l?Array.isArray(o)?l[o[0]]:l[o]:void 0;s&&(i=t._convertSchema(e,s,i))}),i}},{key:"_deepClone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_errorChanged",value:function(){var e=this;this.formElementsArray.forEach(function(t){var n=t.data||{},i=t.field;if(t.id&&i&&e.error){var r=e.error[t.id]||!1,o=!!e.error[t.id];o||Object.keys(e.error||{}).forEach(function(e){e.match(t.id)&&(o=!0)}),e._configElement(t.field,r,n.errorMessageProperty,n.errorMessageSlot),t.field[n.errorProperty]=o,t.field.setAttribute("aria-invalid",o)}})}},{key:"_fireValueChanged",value:function(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_formFieldsChanged",value:function(e){this.dispatchEvent(new CustomEvent("fields-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_getValue",value:function(e){var t=e.split("."),n=this.value;return t.forEach(function(e){n=n&&n[e]?n[e]:void 0}),n}},{key:"_handleChange",value:function(e,t,n){n&&n.stopPropagation&&n.stopPropagation();var i=e.id||e.getAttribute("id"),r=e[t];this._setValue(i,r),this.dispatchEvent(new CustomEvent("".concat(i,"-value-changed"),{bubbles:!0,cancelable:!0,composed:!0,detail:{id:i,element:e,value:r}})),this._fireValueChanged()}},{key:"_schemaChanged",value:function(e,t){var n=this;e&&e!==t&&(setTimeout(function(){n.rebuildForm()},10),this.dispatchEvent(new CustomEvent("schema-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this})))}},{key:"_setValue",value:function(e,t){for(var n=this._deepClone(this.value),i=this.value,r=e?e.split("."):[],o=r.length,l=0;l<o-1;l++){var s=r[l];i[s]||(i[s]={}),i=i[s]}i[r[o-1]]=t,this._valueChanged(this.value,n)}},{key:"_valueChanged",value:function(e,t){e&&e!==t&&this._fireValueChanged()}},{key:"formElements",get:function(){return this.__formElements}},{key:"formElementsArray",get:function(){return this.__formElementsArray}},{key:"schemaConversion",get:function(){return this.elementizer||{defaultSettings:{element:"input",attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},type:{array:{defaultSettings:{element:"simple-fields-array",invalidProperty:"invalid",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"input",valueProperty:"checked",valueChangedProperty:"click",attributes:{type:"checkbox",value:!1}}},file:{defaultSettings:{element:"input",attributes:{type:"url"}}},integer:{defaultSettings:{element:"input",attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{element:"textarea"}},number:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0,descriptionProperty:"description"}},string:{format:{"date-time":{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"datetime-local"}}},time:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"time"}}},date:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"email"}}},uri:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"url"}}}}}}}}},{key:"valid",get:function(){return!this.error||0===Object.keys(this.error==={}).length}}]),i}();function de(){var e=y(['\n        <textarea\n          aria-invalid="','"\n          ?autofocus="','"\n          @blur="','"\n          class="field box-input"\n          @change="','"\n          @keydown="','"\n          ?disabled="','"\n          @focus="','"\n          ?hidden="','"\n          id="','"\n          @input="','"\n          name="','"\n          ?readonly="','"\n          ?required="','"\n          rows="1"\n          tabindex="0"\n          part="textarea"\n        >\n  ',"</textarea\n        >\n      "]);return de=function(){return e},e}function ue(){var e=y(['\n              <option\n                part="select-option"\n                .id="',".",'"\n                ?selected="','"\n                .value="','"\n              >\n                ',"\n              </option>\n            "]);return ue=function(){return e},e}function ce(){var e=y(['\n        <select\n          ?autofocus="','"\n          aria-descrbedby="','"\n          aria-invalid="','"\n          @blur="','"\n          @change="','"\n          class="field"\n          ?disabled="','"\n          @focus="','"\n          ?hidden="','"\n          id="','"\n          ?multiple="','"\n          name="','"\n          ?readonly="','"\n          ?required="','"\n          tabindex="0"\n          part="select"\n        >\n          ','\n        </select>\n        <simple-icon-lite icon="arrow-drop-down"></simple-icon-lite>\n      ']);return ce=function(){return e},e}function pe(){var e=y(['\n                <div class="option inline" part="option">\n                  <label\n                    for="',".",'"\n                    class="radio-label"\n                    part="option-label"\n                    >',"</label\n                  >","\n                </div>\n              "]);return pe=function(){return e},e}function fe(){var e=y(['\n        <fieldset part="fieldset">\n          <legend\n            class="label-main"\n            ?hidden="','"\n            part="fieldset-legend"\n          >\n            ',"",'\n          </legend>\n          <div id="options" part="fieldset-options">\n            ',"\n          </div>\n          ","\n        </fieldset>\n      "]);return fe=function(){return e},e}function me(){var e=y(['\n        <div id="fieldmeta" aria-live="polite" part="field-meta"></div>\n      ']);return me=function(){return e},e}function he(){var e=y(['\n        <div\n          class="','"\n          part="field-main"\n        >\n          ','\n          <div id="field-main-inner" part="field-main-inner">\n            ',"\n            ","\n            ","\n          </div>\n        </div>\n      "]);return he=function(){return e},e}function be(){var e=y(['\n                <simple-icon-lite\n                  icon="','"\n                  @click="','"\n                  part="option-icon"\n                >\n                </simple-icon-lite>\n              ']);return be=function(){return e},e}function ge(){var e=y(['\n        <span class="input-option" part="option-inner">\n          <input\n            ?autofocus="','"\n            aria-descrbedby="','"\n            .aria-invalid="','"\n            @blur="','"\n            @change="','"\n            ?checked="','"\n            class="field ','"\n            ?disabled="','"\n            @focus="','"\n            ?hidden="','"\n            id="','"\n            @input="','"\n            name="','"\n            .placeholder="','"\n            ?readonly="','"\n            ?required="','"\n            tabindex="0"\n            type="','"\n            value="','"\n            part="option-input"\n          />\n          ',"\n        </span>\n      "]);return ge=function(){return e},e}function ve(){var e=y(['\n          fieldset {\n            margin: 0;\n            padding: 0;\n            border: none;\n            background-color: transparent;\n          }\n          option {\n            border-radius: 0;\n          }\n          option[selected] {\n            background-color: var(\n              --simple-fields-faded-background-color,\n              rgba(0, 0, 0, 0.1)\n            );\n          }\n          legend {\n            padding-inline-start: unset;\n            padding-inline-end: unset;\n          }\n          #field-main-inner {\n            position: relative;\n          }\n          #options {\n            display: var(--simple-fields-radio-option-display, flex);\n            flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n          }\n          .option {\n            display: flex;\n            flex-wrap: wrap;\n            align-items: stretch;\n            justify-content: space-between;\n            margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n          }\n          .option:last-of-type {\n            margin: 0;\n          }\n          .option:focus-within label {\n            color: var(--simple-fields-accent-color, #003f7d);\n            transition: color ease-in-out;\n          }\n          :host([type]) fieldset .border-bottom {\n            display: block;\n          }\n          .box-input {\n            width: 100%;\n            padding: 2px;\n          }\n          .box-input:focus {\n            outline: none;\n          }\n          .field-main.inline {\n            align-items: center;\n          }\n          input {\n            background-color: var(\n              --simple-fields-background-color,\n              transparent\n            );\n          }\n          input[type="text"] {\n            padding: 0;\n          }\n          textarea {\n            margin: 0;\n            transition: height 0.5s ease-in-out;\n            box-sizing: border-box;\n            vertical-align: bottom;\n            background-color: var(\n              --simple-fields-background-color,\n              transparent\n            );\n          }\n          select.field {\n            width: calc(100% - 26px);\n            padding-right: 26px;\n            border: none;\n            background-color: var(\n              --simple-fields-background-color,\n              transparent\n            );\n            border-radius: 0;\n            -webkit-appearance: none;\n            -moz-appearance: none;\n            appearance: none;\n          }\n          :host([type="select"]) simple-icon-lite {\n            position: absolute;\n            right: 0px;\n          }\n          select:focus,\n          select:focus-within {\n            outline: none;\n          }\n          :host([type="checkbox"]) span,\n          :host([type="radio"]) span {\n            position: relative;\n            flex: 1 0 auto;\n            display: flex;\n            align-items: center;\n          }\n          :host([type="checkbox"]) span:focus-within,\n          :host([type="radio"]) span:focus-within {\n            color: var(--simple-fields-accent-color, #003f7d);\n            outline: 1px dotted var(--simple-fields-accent-color, #003f7d);\n          }\n          :host([type="checkbox"]) label.checkbox-label,\n          :host([type="radio"]) label.radio-label {\n            flex: 0 0 auto;\n          }\n          :host([type="checkbox"]) input,\n          :host([type="radio"]) input,\n          .field-main.inline input[type="checkbox"].field,\n          .field-main.inline input[type="radio"].field {\n            z-index: -1;\n            opacity: 0;\n            min-width: 0;\n            width: 0;\n            margin: 0;\n            flex: 0 1 0px;\n          }\n          :host([type="checkbox"]) simple-icon-lite,\n          :host([type="radio"]) simple-icon-lite {\n            flex: 0 0 auto;\n          }\n          :host([type="checkbox"]) simple-icon-lite:hover,\n          :host([type="radio"]) simple-icon-lite:hover,\n          :host([type="checkbox"]) span:focus-within simple-icon-lite,\n          :host([type="radio"]) span:focus-within simple-icon-lite {\n            color: var(--simple-fields-accent-color, #003f7d);\n          }\n\n          input[type="range"] {\n            width: 100%;\n            height: calc(\n              var(--simple-fields-font-size, 16px) +\n                var(--simple-fields-line-height, 22px)\n            );\n            padding: 0;\n            margin: 0;\n            box-sizing: border-box;\n            -webkit-appearance: none;\n          }\n          input[type="range"]:focus {\n            outline: none;\n          }\n          input[type="range"]::-webkit-slider-runnable-track {\n            width: 100%;\n            height: 16px;\n            cursor: pointer;\n            background: var(--simple-fields-border-color-light, #ccc);\n            border-radius: 8px;\n            transition: all 0.5ms ease-in-out;\n          }\n          :host([error]) input[type="range"]::-webkit-slider-runnable-track {\n            background: var(--simple-fields-faded-error-color, #ffc0c0);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]::-webkit-slider-thumb {\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background-color: var(\n              --simple-fields-background-color,\n              transparent\n            );\n            box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n            cursor: pointer;\n            -webkit-appearance: none;\n            margin-top: -2px;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][readonly]::-webkit-slider-thumb,\n          input[type="range"][disabled]::-webkit-slider-thumb {\n            cursor: not-allowed;\n          }\n          input[type="range"]:focus::-webkit-slider-thumb {\n            background: var(--simple-fields-accent-color, #3f51b5);\n            transition: all 0.5ms ease-in-out;\n          }\n          :host([error]) input[type="range"]::-webkit-slider-thumb {\n            background: var(--simple-fields-error-color, #b40000);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][readonly]::-webkit-slider-thumb,\n          input[type="range"][disabled]::-webkit-slider-thumb {\n            background: var(--simple-fields-border-color, #999);\n            cursor: not-allowed;\n            box-shadow: none;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]::-moz-range-track {\n            width: 100%;\n            height: 16px;\n            cursor: pointer;\n            background: var(--simple-fields-border-color-light, #ccc);\n            border-radius: 8px;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][readonly]::-moz-range-track,\n          input[type="range"][disabled]::-moz-range-track {\n            cursor: not-allowed;\n          }\n          :host([error]) input[type="range"]::-moz-range-track {\n            background: var(--simple-fields-faded-error-color, #ffc0c0);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]::-moz-range-thumb {\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: var(--simple-fields-background-color, transparent);\n            box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n            cursor: pointer;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]:focus::-moz-range-thumb {\n            background: var(--simple-fields-accent-color, #3f51b5);\n            transition: all 0.5ms ease-in-out;\n          }\n          :host([error]) input[type="range"]::-moz-range-thumb {\n            background: var(--simple-fields-error-color, #b40000);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][readonly]::-moz-range-thumb,\n          input[type="range"][disabled]::-moz-range-thumb {\n            background: var(--simple-fields-border-color, #999);\n            cursor: not-allowed;\n            box-shadow: none;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]::-ms-track {\n            width: 100%;\n            height: 16px;\n            cursor: pointer;\n            background: transparent;\n            border-color: transparent;\n            color: transparent;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][readonly]::-ms-track,\n          input[type="range"][disabled]::-ms-track {\n            cursor: not-allowed;\n          }\n          :host([error]) input[type="range"]::-ms-track {\n            background: var(--simple-fields-faded-error-color, #ffc0c0);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]::-ms-fill-lower {\n            background: var(--simple-fields-border-color-light, #ccc);\n            border-radius: 8px;\n          }\n          input[type="range"]::-ms-fill-upper {\n            background: var(--simple-fields-border-color-light, #ccc);\n            border-radius: 8px;\n          }\n          input[type="range"]::-ms-thumb {\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: var(--simple-fields-background-color, transparent);\n            box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n            cursor: pointer;\n          }\n          input[type="range"][readonly]::-ms-thumb,\n          input[type="range"][disabled]::-ms-thumb {\n            cursor: not-allowed;\n          }\n          input[type="range"]:focus::-ms-thumb {\n            background: var(--simple-fields-accent-color, #3f51b5);\n          }\n          :host([error]) input[type="range"]::-ms-thumb {\n            background: var(--simple-fields-error-color, #b40000);\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"][redonly]::-ms-thumb,\n          input[type="range"][disabled]::-ms-thumb {\n            background: var(--simple-fields-border-color, #999);\n            cursor: not-allowed;\n            box-shadow: none;\n            transition: all 0.5ms ease-in-out;\n          }\n          input[type="range"]:focus::-ms-fill-lower {\n            background: var(--simple-fields-border-color-light, #ccc);\n          }\n          input[type="range"]:focus::-ms-fill-upper {\n            background: var(--simple-fields-border-color-light, #ccc);\n          }\n        ']);return ve=function(){return e},e}window.customElements.define(ae.tag,ae);var ye=function(e){return function(n){f(r,U(e));var i=g(r);function r(){var e;return s(this,r),(e=i.call(this)).autocomplete="off",e.autofocus=!1,e.multiple=!1,e.readonly=!1,e.spellcheck=!1,e.itemsList=[],e.options={},e.wrap=!1,e}return d(r,[{key:"render",value:function(){return this.hasFieldset?this.fieldsetTemplate:v(m(r.prototype),"render",this).call(this)}}],[{key:"tag",get:function(){return"simple-fields-field"}},{key:"styles",get:function(){return[].concat(k(v(m(r),"styles",this)),[t.css(ve())])}},{key:"properties",get:function(){return p(p({},v(m(r),"properties",this)),{},{accept:{type:String},autocomplete:{type:String},autofocus:{type:Boolean},capture:{type:String},counter:{type:String},dirname:{type:String},itemsList:{type:Array,attribute:"items-list"},list:{type:String},max:{type:Number},maxlength:{type:Number},min:{type:Number},minlength:{type:Number},multiple:{type:Boolean},options:{type:Object},placeholder:{type:String},size:{type:Number},spellcheck:{type:String},step:{type:Number},value:{reflect:!0},wrap:{type:Boolean}})}}]),d(r,[{key:"updated",value:function(e){var t=this;this.field||this._updateField(),e.forEach(function(e,n){"id"!==n||t.id||(t.id=t._generateUUID()),t._getAttributes(t.type).includes(n)&&t._updateAttribute(n),"value"===n&&t.value!==e&&(t.field.value!==t.value&&(t.field.value=t.value),t._fireValueChanged()),["counter","maxlength","type"].includes(n)&&["text","textarea"].includes(t.type)&&t._updateCount(),("type"===n&&t.type!==e||["itemsList","options"].includes(n))&&t._updateField()})}},{key:"_handleIconClick",value:function(e,t){this.value=t?"radio"===this.type&&e?void 0:"radio"===this.type?(t||{}).value:e?(this.value||[]).filter(function(e){return e!==t.value}):[].concat(k(this.value||[]),[(t||{}).value]):!e,this.multicheck&&this.autovalidate&&(this.error=!1,this.validate())}},{key:"getOptionIcon",value:function(e){return e&&"checkbox"===this.type?"icons:check-box":"checkbox"===this.type?"icons:check-box-outline-blank":e?"icons:radio-button-checked":"icons:radio-button-unchecked"}},{key:"getInput",value:function(e){var n=this,i=e?"radio"===this.type?this.value===(e||{}).value:(this.value||[]).includes((e||{}).value):!!this.value,r=this.getOptionIcon(i);return t.html(ge(),this.autofocus,this.describedBy||"",this.error?"true":"false",this._onFocusout,this._handleFieldChange,i,["checkbox","color","file","radio","range"].includes(this.type)?"":"box-input",this.disabled,this._onFocusin,this.hidden,e?e.value:this.id,this._handleFieldChange,this.id,this.placeholder||"",this.readonly,this.required,this.type,e?(e||{}).value:this.value,"checkbox"!==this.type&&"radio"!==this.type?"":t.html(be(),r,function(t){return n._handleIconClick(i,e)}))}},{key:"_fireValueChanged",value:function(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleFieldChange",value:function(e){v(m(r.prototype),"_handleFieldChange",this).call(this),this.multicheck&&this.autovalidate&&(this.error=!1,this.validate())}},{key:"_getAttributes",value:function(e){return{checkbox:["autocomplete","form","list"],color:["autocomplete","form","list"],date:["autocomplete","form","list","max","min","step"],"datetime-local":["form","list","max","min","step"],email:["autocomplete","form","list","placeholder"],file:["autocomplete","accept","capture","form","list"],hidden:["autocomplete","form"],month:["autocomplete","form","list","max","min","step"],number:["autocomplete","form","list","max","min","step"],password:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],radio:["autocomplete","form","list"],range:["autocomplete","form","list","max","min","step"],search:["autocomplete","dirname","form","list","maxlength","maxlength","placeholder"],select:["autocomplete","form","list","size"],tel:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],text:["autocomplete","dirname","form","list","maxlength","maxlength","pattern","placeholder"],textarea:["autocomplete","autocomplete","form","maxlength","maxlength","placeholder","spellcheck","wrap"],time:["autocomplete","form","list","max","min","step"],url:["autocomplete","form","list","maxlength","maxlength","placeholder"],week:["autocomplete","form","list","max","min","step"]}[e]}},{key:"_getFieldsetValue",value:function(){return this.value}},{key:"_observeAndListen",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.addEventListener("click",this.focus):this.removeEventListener("click",this.focus)}},{key:"_updateAttribute",value:function(e){this.field&&this[e]!==this.field.getAttribute(e)&&(this[e]||0===this[e]?this.field.setAttribute(e,this[e]):this.field.removeAttribute(e,this[e]))}},{key:"_updateField",value:function(){var e=this;this.type=this._getValidType(this.type),this.field=this.shadowRoot&&this.shadowRoot.querySelector(this.fieldElementTag)?this.shadowRoot.querySelector(this.fieldElementTag):void 0,this._getAttributes(this.type).forEach(function(t){return e._updateAttribute(t)}),"select"!==this.type&&this.field&&this._updateAttribute("value"),this.field&&this.__delayedFocus&&this.focus()}},{key:"hasFieldset",get:function(){return("radio"===this.type||"checkbox"===this.type)&&!this.noOptions}},{key:"fieldElementTag",get:function(){return"select"===this.type||"text"===this.type&&!this.noOptions?"select":"textarea"===this.type?"textarea":this.hasFieldset?"fieldset":"input"}},{key:"fieldMainTemplate",get:function(){return t.html(he(),this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main",this.labelTemplate,this.prefixTemplate,"input"===this.fieldElementTag?this.inputTemplate:"select"===this.fieldElementTag?this.selectTemplate:"textarea"===this.fieldElementTag?this.textareaTemplate:"",this.suffixTemplate)}},{key:"fieldMeta",get:function(){return t.html(me())}},{key:"fieldsetTemplate",get:function(){var e=this;return t.html(fe(),!this.label,this.label,this.error||this.required?"*":"",(this.sortedOptions||[]).map(function(n){return t.html(pe(),e.id,n.value,n.text,e.getInput(n))}),this.fieldBottom)}},{key:"inputTemplate",get:function(){return this.getInput()}},{key:"multicheck",get:function(){return this.hasFieldset}},{key:"noOptions",get:function(){return this.itemsList.length<1&&Object.keys(this.options||{}).length<1}},{key:"numberError",get:function(){var e=!!this._getFieldValue()&&this._getFieldValue().length,t=!("select"!==this.type&&!this.multicheck)&&this.min,n=!("select"!==this.type&&!this.multicheck)&&this.max;return n&&e&&n<e?n-e:!!(t&&e&&t>e)&&t-e}},{key:"sortedOptions",get:function(){var e=this,t=(this.itemsList||[]).map(function(e,t){return"object"===l(e)?e:{value:e,text:e}});return Object.keys(this.options||{}).sort(function(e,t){return e>t?1:-1}).forEach(function(n){return t.push({value:n,text:e.options[n]})}),t}},{key:"selectTemplate",get:function(){var e=this;return t.html(ce(),this.autofocus,this.describedBy,this.error?"true":"false",this._onFocusout,this._handleFieldChange,this.disabled,this._onFocusin,this.hidden,this.id,this.multiple,this.id,this.readonly,this.required,(this.sortedOptions||[]).map(function(n){return t.html(ue(),e.id,n.value,e.multiple?e.value&&e.value.includes(n.value):e.value===n.value,n.value,n.text)}))}},{key:"slottedFieldObserver",get:function(){}},{key:"textareaTemplate",get:function(){return t.html(de(),this.error?"true":"false",this.autofocus,this._onFocusout,this._handleFieldChange,function(e){return e.stopPropagation()},this.disabled,this._onFocusin,this.hidden,this.id,this._handleFieldChange,this.id,this.readonly,this.required,this.value||"")}}]),r}()},ke=function(e){f(i,ye(t.LitElement));var n=g(i);function i(){return s(this,i),n.apply(this,arguments)}return i}();function xe(){var e=y(["\n:host {\n  display: block;\n  --simple-picker-background-color: var(--simple-fields-background-color,transparent);\n  --simple-picker-border-width: 0;\n  --simple-picker-focus-border-width: 0;\n  --simple-picker-display: block;\n  --simple-picker-listbox-border-width: 1px;\n  --simple-picker-listbox-outline: none;\n}\n\n:host([hidden]) {\n  display: none;\n}\n      "]);return xe=function(){return e},e}function _e(){var e=y(['\n\n<div id="schema-fields" aria-live="polite" part="fields-list">\n  <slot></slot>\n</div>']);return _e=function(){return e},e}window.customElements.define(ke.tag,ke);var we=function(e){f(i,ae);var n=g(i);function i(){var e;return s(this,i),(e=n.call(this)).activeTabs={},e.__codeElements=[],e.disableResponsive=!1,setTimeout(function(){e.addEventListener("a11y-tabs-active-changed",e._handleActiveTab)},0),e}return d(i,[{key:"render",value:function(){return t.html(_e())}}],[{key:"styles",get:function(){return[].concat(k(v(m(i),"styles",this)),[t.css(xe())])}},{key:"haxProperties",get:function(){return{}}},{key:"properties",get:function(){return p(p({},v(m(i),"properties",this)),{},{disableResponsive:{type:Boolean,attribute:"disable-responsive"},fields:{type:Array},schematizer:{type:Object,attribute:"schematizer"},label:{type:String},__activeTabs:{type:Object,attribute:"active-path"},codeTheme:{type:String,attribute:"code-theme"}})}},{key:"tag",get:function(){return"simple-fields"}}]),d(i,[{key:"updated",value:function(e){var t=this;v(m(i.prototype),"updated",this)&&v(m(i.prototype),"updated",this).call(this,e),e.forEach(function(e,n){["fields","fieldsConversion"].includes(n)&&(t.schema=t.convertedSchema),"__activeTabs"===n&&t.activeTabs!==e&&t._handleActiveTabs()})}},{key:"setActiveTab",value:function(e){var t=e.replace(/\.[0-9a-z]+$/,""),n=this.querySelector("#".concat(t)),i=n.querySelector("#".concat(e));n&&i&&(n.activeTab=e)}},{key:"setActivePath",value:function(e){var t=this;e.split("/").forEach(function(e){t.setActiveTab(e)})}},{key:"_convertField",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fieldsConversion,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.keys(e||{}),o=Object.keys(n||{}).filter(function(e){return r.includes(e)});return n.defaultSettings&&(i=n.defaultSettings),o.forEach(function(r){var o=e[r],l=n?n[r]:void 0,s=l?Array.isArray(o)?l[o[0]]:l[o]:void 0;s&&(i=t._convertField(e,s,l,i))}),i}},{key:"_fieldToSchema",value:function(e){var t=this,n={};return Object.keys(e||{}).forEach(function(i){!e.inputMethod&&e.properties&&(e.inputMethod="object");var r=t._convertField(e);r.type&&(n.type=r.type),r.format&&(n.format=r.format),"pattern"===i?".*"!=e.validation&&(n.pattern=e.validation):"properties"===i?"array"===r.type&&Array.isArray(e.properties)?n.items={type:"object",properties:t.fieldsToSchema(e.properties)}:"array"===r.type?n.items=t._fieldToSchema(e.properties):n.properties=t.fieldsToSchema(e.properties):["items","inputMethod","property","properties","required","type","validation"].includes(i)||(n[i]=e[i])}),"markup"!=n.type||n.theme||(n.theme=this.codeTheme),n}},{key:"fieldsToSchema",value:function(e){var t=this,n={};return e&&e.forEach&&e.forEach(function(e){var i=e.property?e.property:"";n[i]=t._fieldToSchema(e)}),n}},{key:"_handleActiveTabs",value:function(){this.dispatchEvent(new CustomEvent("active-tabs-changed",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}},{key:"_handleActiveTab",value:function(e){e&&e.detail&&e.detail.id&&(this.activeTabs[e.detail.id]=e.detail.activeTab)}},{key:"convertedSchema",get:function(){return{$schema:"http://json-schema.org/schema#",title:this.label,type:"object",required:[],properties:this.fieldsToSchema(this.fields)}}},{key:"schemaConversion",get:function(){var e;return this.elementizer||{defaultSettings:{element:"simple-fields-field",errorProperty:"errorMessage",invalidProperty:"invalid",noWrap:!0,attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},format:{radio:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"radio"},properties:{options:"options"},child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},select:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"select"},properties:{options:"options",items:"itemsList"}}},"simple-picker":{defaultSettings:{import:"@lrnwebcomponents/simple-picker/simple-picker.js",element:"simple-picker",attributes:{autofocus:!0},properties:{options:"options"}}}},type:{array:{defaultSettings:{element:"simple-fields-array",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy",sortable:!0}}}},boolean:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"checkbox",value:!1}}},file:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}},integer:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-code.js",element:"simple-fields-code",setValueProperty:"editorValue",noWrap:!0,properties:{theme:"theme"}},format:{"md-block":{defaultSettings:{element:"md-block",setValueProperty:"source",noWrap:!0}}}},number:{defaultSettings:{element:"simple-fields-field",noWrap:!0,type:"number",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0},format:{tabs:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tabs.js",element:"simple-fields-tabs",noWrap:!0,child:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tab.js",element:"simple-fields-tab",noWrap:!0,labelSlot:"label",descriptionSlot:""},properties:{layoutBreakpoint:"layoutBreakpoint",iconBreakpoint:"iconBreakpoint",sticky:"sticky",disableResponsive:this.disableResponsive}}},fields:{defaultSettings:{element:"simple-fields",noWrap:!0,descriptionProperty:"description",properties:{schema:"schema"}}}}},string:{format:(e={alt:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,required:!0}}},color:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"color"}}},colorpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js",element:"simple-colors-picker",attributes:{autofocus:!0}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},"date-time":{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"datetime-local"}}}},u(e,"date",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}}),u(e,"email",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"email"}}}),u(e,"fileupload",{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-upload.js",element:"simple-fields-upload",noWrap:!0,attributes:{autofocus:!0}}}),u(e,"iconpicker",{defaultSettings:{import:"@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js",element:"simple-icon-picker",attributes:{autofocus:!0},properties:{options:"icons",exclude:"exclude",excludeSets:"excludeSets",includeSets:"includeSets"}}}),u(e,"month",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"month"}}}),u(e,"textarea",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"textarea"}}}),u(e,"time",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"time"}}}),u(e,"uri",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"}}}),e)}}}}},{key:"fieldsConversion",get:function(){return this.schematizer||{defaultSettings:{type:"string"},format:{"simple-fields":{defaultSettings:{type:"object",format:"simple-fields"}}},inputMethod:{alt:{defaultSettings:{type:"string",format:"alt"}},array:{defaultSettings:{type:"array"},properties:{label:"itemLabel"}},boolean:{defaultSettings:{type:"boolean"}},code:{defaultSettings:{type:"markup"}},"code-editor":{defaultSettings:{type:"markup"}},color:{defaultSettings:{type:"string",format:"color"}},colorpicker:{defaultSettings:{type:"string",format:"colorpicker"}},"date-time":{defaultSettings:{type:"string",format:"date-time"}},datepicker:{defaultSettings:{type:"string",format:"date"}},fieldset:{defaultSettings:{type:"object"}},fileupload:{defaultSettings:{type:"string",format:"fileupload"}},haxupload:{defaultSettings:{type:"string",format:"fileupload"}},iconpicker:{defaultSettings:{type:"string",format:"iconpicker"}},markup:{defaultSettings:{type:"markup"}},"md-block":{defaultSettings:{type:"markup"}},monthpicker:{defaultSettings:{type:"string",format:"month"}},number:{defaultSettings:{type:"number"}},object:{defaultSettings:{type:"object"}},select:{defaultSettings:{type:"string",format:"select"}},slider:{defaultSettings:{type:"number",format:"slider"}},tabs:{defaultSettings:{type:"object",format:"tabs"}},textarea:{defaultSettings:{type:"string",format:"textarea"}},timepicker:{defaultSettings:{type:"string",format:"time"}},weekpicker:{defaultSettings:{type:"string",format:"week"}}}}}}]),i}();window.customElements.define(we.tag,we),e.SimpleFields=we,Object.defineProperty(e,"__esModule",{value:!0})});
