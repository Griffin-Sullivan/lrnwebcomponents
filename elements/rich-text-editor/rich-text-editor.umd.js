!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element/lit-element.js"),require("./lib/rich-text-editor-styles.js"),require("@lrnwebcomponents/utils/utils.js"),require("@lrnwebcomponents/rich-text-editor/lib/rich-text-editor-styles.js"),require("@lrnwebcomponents/md-extra-icons/md-extra-icons.js"),require("@polymer/iron-icons/image-icons.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/iron-icons/iron-icons.js"),require("./lib/buttons/rich-text-editor-button-styles.js"),require("./lib/buttons/rich-text-editor-link.js"),require("./lib/buttons/rich-text-editor-image.js"),require("./lib/buttons/rich-text-editor-underline.js"),require("./lib/buttons/rich-text-editor-symbol-picker.js"),require("./lib/buttons/rich-text-editor-heading-picker.js"),require("./lib/buttons/rich-text-editor-more-button.js"),require("./lib/buttons/rich-text-editor-button.js"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js"),require("@lrnwebcomponents/rich-text-editor/lib/singletons/rich-text-editor-selection.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("@lrnwebcomponents/absolute-position-behavior/absolute-position-behavior.js"),require("shadow-selection-polyfill/shadow.js")):"function"==typeof define&&define.amd?define(["exports","lit-element/lit-element.js","./lib/rich-text-editor-styles.js","@lrnwebcomponents/utils/utils.js","@lrnwebcomponents/rich-text-editor/lib/rich-text-editor-styles.js","@lrnwebcomponents/md-extra-icons/md-extra-icons.js","@polymer/iron-icons/image-icons.js","@polymer/iron-icons/editor-icons.js","@polymer/iron-icons/iron-icons.js","./lib/buttons/rich-text-editor-button-styles.js","./lib/buttons/rich-text-editor-link.js","./lib/buttons/rich-text-editor-image.js","./lib/buttons/rich-text-editor-underline.js","./lib/buttons/rich-text-editor-symbol-picker.js","./lib/buttons/rich-text-editor-heading-picker.js","./lib/buttons/rich-text-editor-more-button.js","./lib/buttons/rich-text-editor-button.js","@lrnwebcomponents/responsive-utility/responsive-utility.js","@lrnwebcomponents/rich-text-editor/lib/singletons/rich-text-editor-selection.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js","@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js","@lrnwebcomponents/absolute-position-behavior/absolute-position-behavior.js","shadow-selection-polyfill/shadow.js"],t):t((e=e||self).RichTextEditor={},e.litElement_js,e.richTextEditorStyles_js,e.utils_js,e.richTextEditorStyles_js$1,null,null,null,null,e.richTextEditorButtonStyles_js,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e.shadow)}(this,function(e,t,n,o,i,r,a,s,l,d,u,h,p,b,m,f,g,y,v,x,k,_,w,E,j){"use strict";function C(e,t,n,o,i,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){C(r,o,i,a,s,"next",e)}function s(e){C(r,o,i,a,s,"throw",e)}a(void 0)})}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o,i,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o=this,!(i=n)||"object"!=typeof i&&"function"!=typeof i?q(o):i}}function H(e,t,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function z(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function D(){var e=I(["\n        :host {\n          background-color: var(--rich-text-editor-selection-bg);\n          margin: 0;\n          padding: 0;\n          display: inline-block;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        :host([collapsed]):after {\n          content: '|';\n          color: var(--rich-text-editor-selection-bg);\n          background-color: transparent;\n        }\n        :host + *,\n        ::slotted(*) {\n          background-color: var(--rich-text-editor-selection-bg);\n        }\n      "]);return D=function(){return e},e}function F(){var e=I(["<slot></slot>"]);return F=function(){return e},e}var V=function(e){N(i,n.RichTextEditorStyles(t.LitElement));var o=U(i);function i(){var e;T(this,i);var t=q(e=o.call(this));return e.hidden=!0,e.__toolbars=[],e.__clipboard=document.createElement("textarea"),e.__clipboard.setAttribute("aria-hidden",!0),e.__clipboard.style.position="absolute",e.__clipboard.style.left="-9999px",e.__clipboard.style.top="0px",e.__clipboard.style.width="0px",e.__clipboard.style.height="0px",e.id=e._generateUUID(),document.body.appendChild(e.__clipboard),window.addEventListener("register",e._handleRegistration.bind(t)),e}return R(i,[{key:"render",value:function(){return t.html(F())}}],[{key:"tag",get:function(){return"rich-text-editor-selection"}},{key:"styles",get:function(){return[].concat(z(H(A(i),"styles",this)),[t.css(D())])}},{key:"properties",get:function(){return{editor:{type:Object},collapsed:{type:Boolean,reflect:!0,attribute:"collapsed"},hidden:{type:Boolean,reflect:!0,attribute:"hidden"},id:{type:String,reflect:!0,attribute:"id"},observer:{type:Object},range:{type:Object},toolbar:{type:Object},__toolbars:{type:Array}}}}]),R(i,[{key:"updated",value:function(e){H(A(i.prototype),"updated",this).call(this,e),e.forEach(function(e,t){})}},{key:"disconnectedCallback",value:function(){H(A(i.prototype),"disconnectedCallback",this).call(this)}},{key:"cancelEdits",value:function(e){e.revert(),this.edit(e,!1)}},{key:"closeToolbar",value:function(e,t){t&&this.disableEditing(t),e.editor=void 0,document.body.append(e)}},{key:"disableEditing",value:function(e){e&&(this.getRoot(e).onselectionchange=void 0,e.disableEditing(),e.makeSticky(!1))}},{key:"execCommand",value:function(e,t,n,o){var i=o.editor;if("cancel"===e)o.editor.revert(),this.closeToolbar(o,i);else if("close"===e)this.closeToolbar(o,i);else if(n){if(this.range=i.range,this.updateRange(i,n),this.selectRange(n,i),"replaceHTML"===e)this.getRangeNode().innerHTML=t;else"paste"!==e?document.execCommand(e,!1,t):navigator.clipboard&&this.pasteFromClipboard(i);this.highlight(o,!1)}}},{key:"edit",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n=e?this.getConnectedToolbar(e):void 0,o=t?n.editor:void 0;this.highlight(n,!1),n&&o!==e&&(o&&this.disableEditing(o),n.editor=e,this.enableEditing(e,n))}}},{key:"enableEditing",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getConnectedToolbar(e);e&&(e.makeSticky(n.sticky),e.parentNode.insertBefore(n,e),e.enableEditing(),this.updateRange(e),this.getRoot(e).onselectionchange=function(o){n.__promptOpen||t.updateRange(e)})}},{key:"expandRangeTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t?this.getRangeNode(t):void 0,o=n&&n.tagName?n.tagName.toLowerCase():void 0;return e.toLowerCase().replace(/\s*/g,"").split(",").includes(o)?n:n.closest(e)?(t.selectNode(n.closest(e)),t):void 0}},{key:"getRangeNode",value:function(e){var t=e?e.commonAncestorContainer:void 0,n=e?e.startContainer:void 0,o=e?e.startOffset:void 0,i=e?e.endContainer:void 0,r=e?e.endOffset:void 0,a=n&&n.children?n.children[o-1]:void 0;return n===i&&r-o==1?a:t}},{key:"getRoot",value:function(e){return e&&e!==document?e.parentNode?this.getRoot(e.parentNode):e:document}},{key:"getSanitizeClipboard",value:function(e){var t="<body(.*\n)*>(.*\n)*</body>";return e.match(t)&&e.match(t).length>0&&(e=e.match(t)[0].replace(/<\?body(.*\n)*\>/i)),e}},{key:"getConnectedToolbar",value:function(e){if(e.id||(e.id=this._generateUUID()),!e.__connectedToolbar){var t,n=e.toolbar?(this.__toolbars||[]).filter(function(t){return e.toolbar&&t.id===e.toolbar}):[];0===n.length&&(n=e.type?(this.__toolbars||[]).filter(function(t){return e.type&&t.type===e.type}):[]),0===n.length&&(n=this.__toolbars),n[0]?t=n[0]:0===n.length&&(t=document.createElement(e.type||"rich-text-editor-toolbar"),e.parentNode.insertBefore(t,e)),t.id=t.id||e.toolbar||this._generateUUID(),e.__connectedToolbar=t}return e.__connectedToolbar}},{key:"highlight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.toolbar=e,(e?e.editor:void 0)&&(!1!==t?e.range&&(this.hidden=!1,e.range.insertNode(this),n&&this.append(n),e.range.setStartAfter(this),this.range=e.range):(this.updateRange(e.editor,e.range),this.hidden=!0,this.toolbar=void 0,this.range=void 0,document.body.appendChild(this)),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,composed:!0,detail:t})))}},{key:"highlightNode",value:function(e,t){this.selectNode(e,t.range,t.editor),this.highlight(t)}},{key:"pasteFromClipboard",value:function(e){var t=this;setTimeout(S(regeneratorRuntime.mark(function n(){var o,i,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=window.getSelection(),i=e.range,n.next=4,navigator.clipboard.readText();case 4:r=n.sent,t.__clipboard.value=r,t.__clipboard.focus(),t.__clipboard.select(),document.execCommand("paste"),o.removeAllRanges(),o.addRange(i),t.pasteIntoEditor(e,t.__clipboard.value);case 12:case"end":return n.stop()}},n)})),2e3)}},{key:"pasteIntoEditor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&this.pasteIntoRange(e,e.range,n?this.getSanitizeClipboard(t):t)}},{key:"pasteIntoRange",value:function(e,t,n){var o=document.createElement("div");if(t.commonAncestorContainer.parentNode.closest("[contenteditable=true]:not([disabled]),input:not([disabled]),textarea:not([disabled])")){for(o.innerHTML=n,t&&t.extractContents&&t.extractContents(),t.insertNode(o);o.firstChild;)o.parentNode.insertBefore(o.firstChild,o);o.parentNode.removeChild(o)}}},{key:"registerEditor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e?this.getConnectedToolbar(e):void 0,i={click:function(n){return t._handleEditorClick(e,n)},focus:function(n){o.__promptOpen||t.edit(e)},getrange:function(n){o.__promptOpen||(t.toolbar=o,t.updateRange(e,e.range))},keydown:function(n){return t._handleShortcutKeys(e,n)},pastefromclipboard:function(e){return t.pasteFromClipboard(e.detail)},pastecontent:function(e){return t._handlePaste(e)}};return n?Object.keys(i).forEach(function(t){return e.removeEventListener(t,i[t])}):Object.keys(i).forEach(function(t){return e.addEventListener(t,i[t])}),e.__connectedToolbar}},{key:"registerToolbar",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={command:function(n){n.stopImmediatePropagation(),t.execCommand(n.detail.command,n.detail.commandVal,n.detail.range,e)},highlight:function(n){n.stopImmediatePropagation(),t.highlight(e,n.detail)},highlightnode:function(n){n.stopImmediatePropagation(),t.highlightNode(n.detail,e)},pastefromclipboard:function(e){e.stopImmediatePropagation(),t.pasteFromClipboard(e.detail)},"rich-text-editor-prompt-closed":function(t){e.__promptOpen=!1},"rich-text-editor-prompt-open":function(t){e.__promptOpen=!0},selectnode:function(n){n.stopImmediatePropagation(),t.selectNode(n.detail,e.range)},selectnodecontents:function(n){n.stopImmediatePropagation(),t.selectNode(n.detail,e.range)},selectrange:function(n){n.stopImmediatePropagation(),t.selectRange(n.detail,e.editor)},wrapselection:function(n){n.stopImmediatePropagation(),t.surroundRange(n.detail,e.range)}};n||e.registered?(e.registered=!1,Object.keys(o).forEach(function(t){return e.removeEventListener(t,o[t])})):(this.__toolbars.push(e),Object.keys(o).forEach(function(t){return e.addEventListener(t,o[t])}),e.registered=!0)}},{key:"selectNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.toolbar.editor;if(!t){var o=window.getSelection();t=document.createRange(),o.removeAllRanges(),o.addRange(t)}t&&(t.selectNode(e),n&&this.updateRange(n,t))}},{key:"selectNodeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.toolbar.editor;if(e){if(!t){var o=window.getSelection();t=document.createRange(),o.removeAllRanges(),o.addRange(t)}n&&this.updateRange(n)}}},{key:"selectRange",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;if(e){if(t){var o=window.getSelection();o.removeAllRanges(),o.addRange(e)}else e.isCollapsed||e.collapse();n&&this.updateRange(n)}return e}},{key:"surroundRange",value:function(e,t){return t&&(t.surroundContents(e),editor&&this.updateRange(editor)),t}},{key:"updateRange",value:function(e,t){if(e){var n=this.getConnectedToolbar(e);this.toolbar=n,t||(t=e.range),e.range=t,n&&(n.selectedNode=e.selectedNode,n.selectionAncestors=e.selectionAncestors,n.range=t)}}},{key:"_generateUUID",value:function(){var e=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return"rte-"+"ss-s-s-s-sss".replace(/s/g,e)}},{key:"_handleBlur",value:function(e,t){null===t.relatedTarget||"rich-text-editor"===!t.relatedTarget.startsWith?this.edit(e,!0):e&&this.highlight(e.toolbar)}},{key:"_handleEditorClick",value:function(e,t){if(e.__focused){var n=e?this.getConnectedToolbar(e):void 0,o=n?Object.keys(n.__clickableElements||{}):[],i=t.target||t.srcElement||{tagName:""},r={detail:i},a=(i.tagName||"").toLowerCase();o.includes(a)&&(t.preventDefault(),n.__clickableElements[a](r))}else e.focus()}},{key:"_handleRegistration",value:function(e){e.detail&&(e.detail.toolbar&&this.registerToolbar(e.detail.toolbar,e.detail.remove),e.detail.editor&&this.registerEditor(e.detail.editor,e.detail.remove))}},{key:"_handleShortcutKeys",value:function(e,t){var n=e?this.getConnectedToolbar(e):void 0;if(e.contenteditable){var o=t.key;t.shiftKey&&(o="shift+"+o),t.altKey&&(o="alt+"+o),("MacIntel"===window.navigator.platform&&t.metaKey||t.ctrlKey)&&(o="ctrl+"+o),n.shortcutKeys[o]&&n.shortcutKeys[o]._keysPressed(t)}}}]),i}();function $(){var e=I(["\n          :host {\n            display: flex;\n          }\n          #toolbar[collapsed] {\n            width: max-content;\n          }\n        "]);return $=function(){return e},e}function W(){var e=I(['\n          #toolbar {\n            display: flex;\n            opacity: 1;\n            z-index: 2;\n            margin: 0;\n            align-items: stretch;\n            flex-wrap: wrap;\n            justify-content: flex-start;\n            background-color: var(--rich-text-editor-bg);\n            border: var(--rich-text-editor-border);\n            font-size: 12px;\n            transition: all 0.5s;\n          }\n          #toolbar[hidden] {\n            z-index: -1;\n            visibility: hidden;\n            opacity: 0;\n            height: 0;\n          }\n          #toolbar .group {\n            display: flex;\n            flex-wrap: nowrap;\n            justify-content: space-evenly;\n            align-items: stretch;\n            padding: 0 3px;\n          }\n          #toolbar .group:not(:last-of-type) {\n            margin-right: 3px;\n            border-right: var(--rich-text-editor-border);\n          }\n          #toolbar .button {\n            display: flex;\n            flex: 0 0 auto;\n            align-items: stretch;\n          }\n          #toolbar #morebutton {\n            flex: 1 0 auto;\n            justify-content: flex-end;\n          }\n          /* hide more button if all buttons are displayed */\n          #toolbar[responsive-size="xs"] #morebutton[collapse-max="xs"],\n          #toolbar[responsive-size="sm"] #morebutton[collapse-max*="s"],\n          #toolbar[responsive-size="md"] #morebutton:not([collapse-max*="l"]),\n          #toolbar[responsive-size="lg"] #morebutton:not([collapse-max="xl"]),\n          #toolbar[responsive-size="xl"] #morebutton,\n          /* hide buttons if they should be collaped until */\n          #toolbar[responsive-size="xs"][collapsed] *[collapsed-until*="m"],\n          #toolbar[responsive-size="xs"][collapsed] *[collapsed-until*="l"],\n          #toolbar[responsive-size="sm"][collapsed] *[collapsed-until="md"],\n          #toolbar[responsive-size="sm"][collapsed] *[collapsed-until*="l"],\n          #toolbar[responsive-size="md"][collapsed] *[collapsed-until*="l"],\n          #toolbar[responsive-size="lg"][collapsed] *[collapsed-until="xl"] {\n            display: none;\n          }\n        ']);return W=function(){return e},e}function G(){var e=I(["\n          :host([sticky]) {\n            position: sticky;\n            top: 0;\n          }\n        "]);return G=function(){return e},e}function J(){var e=I(['\n        <div\n          id="toolbar"\n          aria-live="polite"\n          aria-hidden="','"\n          ?collapsed="','"\n          ?hidden="','"\n          @focus="','"\n          @blur="','"\n          @mouseover="','"\n          @mouseout="','"\n          @selectnode="','"\n          @selectnodecontents="','"\n          @selectrange="','"\n        >\n          <rich-text-editor-more-button\n            id="morebutton"\n            class="button"\n            aria-controls="toolbar"\n            icon="','"\n            label="','"\n            ?show-text-label="','"\n            ?label-toggled="','"\n            ?toggled="','"\n            @click="','"\n          >\n          </rich-text-editor-more-button>\n        </div>\n      ']);return J=function(){return e},e}function Q(){var e=I([" "," "]);return Q=function(){return e},e}window.customElements.define(V.tag,V),window.RichTextEditorSelection={},window.RichTextEditorSelection.instance=null,window.RichTextEditorSelection.requestAvailability=function(){return null==window.RichTextEditorSelection.instance&&(window.RichTextEditorSelection.instance=document.createElement(V.tag),document.body.appendChild(window.RichTextEditorSelection.instance)),window.RichTextEditorSelection.instance};var X=function(e){return function(o){N(r,n.RichTextEditorStyles(e));var i=U(r);function r(){var e;return T(this,r),e=i.call(this),window.ResponsiveUtility.requestAvailability(),e.collapsed=!0,e.config=e.defaultConfig,e.moreIcon="more-vert",e.moreLabel="More Buttons",e.moreLabelToggled="Fewer Buttons",e.moreShowTextLabel=!1,e.responsiveSize="xs",e.sticky=!1,e.__clickableElements={},e.shortcutKeys=[],e.addEventListener("button-register",e._registerButton),e}return R(r,[{key:"render",value:function(){return t.html(Q(),this.toolbarTemplate)}},{key:"defaultConfig",get:function(){return[{label:"History",type:"button-group",buttons:[{command:"undo",icon:"undo",label:"Undo",shortcutKeys:"ctrl+z",type:"rich-text-editor-button"},{command:"redo",icon:"redo",label:"Redo",shortcutKeys:"ctrl+shift+z",type:"rich-text-editor-button"}]},{label:"Basic Inline Operations",type:"button-group",buttons:[{label:"Format",type:"rich-text-editor-heading-picker"},{command:"bold",icon:"editor:format-bold",label:"Bold",shortcutKeys:"ctrl+b",toggles:!0,type:"rich-text-editor-button"},{command:"italic",icon:"editor:format-italic",label:"Italics",shortcutKeys:"ctrl+i",toggles:!0,type:"rich-text-editor-button"},{command:"removeFormat",icon:"editor:format-clear",label:"Erase Format",type:"rich-text-editor-button"}]},{label:"Links",type:"button-group",buttons:[{icon:"link",label:"Link",shortcutKeys:"ctrl+k",type:"rich-text-editor-link"}]},{label:"Clipboard Operations",type:"button-group",buttons:[{command:"cut",icon:"content-cut",label:"Cut",shortcutKeys:"ctrl+x",type:"rich-text-editor-button"},{command:"copy",icon:"content-copy",label:"Copy",shortcutKeys:"ctrl+c",type:"rich-text-editor-button"},{command:"paste",icon:"content-paste",label:"Paste",shortcutKeys:"ctrl+v",type:"rich-text-editor-button"}]},{collapsedUntil:"md",label:"Subscript and Superscript",type:"button-group",buttons:[{command:"subscript",icon:"mdextra:subscript",label:"Subscript",toggles:!0,type:"rich-text-editor-button"},{command:"superscript",icon:"mdextra:superscript",label:"Superscript",toggles:!0,type:"rich-text-editor-button"}]},{collapsedUntil:"sm",icon:"editor:functions",label:"Insert Symbol",symbolTypes:["symbols"],type:"rich-text-editor-symbol-picker"},{collapsedUntil:"sm",label:"Lists and Indents",type:"button-group",buttons:[{command:"insertOrderedList",icon:"editor:format-list-numbered",label:"Ordered List",toggles:!0,type:"rich-text-editor-button"},{command:"insertUnorderedList",icon:"editor:format-list-bulleted",label:"Unordered List",toggles:!0,type:"rich-text-editor-button"},{collapsedUntil:"lg",command:"formatBlock",commandVal:"blockquote",label:"Blockquote",icon:"editor:format-quote",shortcutKeys:"ctrl+'",type:"rich-text-editor-button"},{command:"indent",icon:"editor:format-indent-increase",event:"text-indent",label:"Increase Indent",shortcutKeys:"ctrl+]",type:"rich-text-editor-button"},{command:"outdent",event:"text-outdent",icon:"editor:format-indent-decrease",label:"Decrease Indent",shortcutKeys:"ctrl+[",type:"rich-text-editor-button"}]}]}},{key:"miniConfig",get:function(){return[{label:"Basic Inline Operations",type:"button-group",buttons:[{command:"bold",icon:"editor:format-bold",label:"Bold",toggles:!0,type:"rich-text-editor-button"},{command:"italic",icon:"editor:format-italic",label:"Italics",toggles:!0,type:"rich-text-editor-button"},{collapsedUntil:"md",command:"removeFormat",icon:"editor:format-clear",label:"Erase Format",type:"rich-text-editor-button"}]},{label:"Links",type:"button-group",buttons:[{command:"link",icon:"link",label:"Link",toggledCommand:"unlink",toggledIcon:"mdextra:unlink",toggledLabel:"Unink",toggles:!0,type:"rich-text-editor-link"}]},{collapsedUntil:"md",label:"Subscript and Superscript",type:"button-group",buttons:[{command:"subscript",icon:"mdextra:subscript",label:"Subscript",toggles:!0,type:"rich-text-editor-button"},{command:"superscript",icon:"mdextra:superscript",label:"Superscript",toggles:!0,type:"rich-text-editor-button"}]},{collapsedUntil:"sm",label:"Lists and Indents",type:"button-group",buttons:[{command:"insertOrderedList",icon:"editor:format-list-numbered",label:"Ordered List",toggles:!0,type:"rich-text-editor-button"},{command:"insertUnorderedList",icon:"editor:format-list-bulleted",label:"Unordered List",toggles:!0,type:"rich-text-editor-button"}]}]}},{key:"toolbarTemplate",get:function(){var e=this;return t.html(J(),this.disconnected?"true":"false",this.collapsed,this.disconnected,function(t){return e.__focused=!0},function(t){return e.__focused=!1},function(t){return e.__hovered=!0},function(t){return e.__hovered=!1},function(t){return e.selectNode(t.detail)},function(t){return e.selectNodeContents(t.detail)},function(t){return e.selectRange(t.detail)},this.moreIcon,this.moreLabel,this.moreShowTextLabel,this.moreLabelToggled,!this.collapsed,this._toggleMore)}}],[{key:"tag",get:function(){return"rich-text-editor-toolbar"}},{key:"stickyStyles",get:function(){return[t.css(G())]}},{key:"baseStyles",get:function(){return[].concat(z(H(A(r),"styles",this)),[t.css(W())])}},{key:"miniStyles",get:function(){return[t.css($())]}},{key:"styles",get:function(){return[].concat(z(this.baseStyles),z(this.stickyStyles))}},{key:"properties",get:function(){return{buttons:{name:"buttons",type:Array},collapsed:{name:"collapsed",type:Boolean,attribute:"collapsed"},config:{name:"config",type:Object,attribute:"config"},editor:{name:"editor",type:Object,attribute:"editor"},id:{name:"id",type:String,attribute:"id",reflect:!0},moreIcon:{name:"moreIcon",type:String,attribute:"more-icon"},moreLabel:{name:"moreLabel",type:String,attribute:"more-label"},moreLabelToggled:{name:"moreLabelToggled",type:String,attribute:"more-label-toggled",value:"Fewer Buttons"},moreShowTextLabel:{name:"moreShowTextLabel",type:Boolean,attribute:"more-show-text-label"},responsiveSize:{name:"responsiveSize",type:String,attribute:"responsive-size",reflect:!0},savedSelection:{name:"savedSelection",type:Object},range:{name:"range",type:Object},registered:{type:Boolean},selectedNode:{type:Object},selectionAncestors:{type:Array},shortcutKeys:{name:"shortcutKeys",type:Array},show:{type:String,attribute:"show",reflect:!0},sticky:{name:"sticky",type:Boolean,attribute:"sticky",reflect:!0},__clickableElements:{name:"__clickableElements",type:Object},__focused:{name:"__focused",type:Boolean},__hovered:{name:"__hovered",type:Boolean},__promptOpen:{name:"__promptOpen",type:Boolean},__selection:{type:Object}}}}]),R(r,[{key:"firstUpdated",value:function(e){H(A(r.prototype),"firstUpdated",this).call(this,e),this.buttons=this._getButtons(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this.shadowRoot.querySelector("#toolbar")}})),this.__selection=window.RichTextEditorSelection.requestAvailability(),this.register()}},{key:"updated",value:function(e){var t=this;H(A(r.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"range"===n&&t._rangeChange(),"editor"===n&&t._editorChange()})}},{key:"connectedCallback",value:function(){H(A(r.prototype),"connectedCallback",this).call(this),this.register()}},{key:"disconnectedCallback",value:function(){H(A(r.prototype),"disconnectedCallback",this).call(this),this.register(!0)}},{key:"cancel",value:function(){this.dispatchEvent(new c("cancel",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"highlight",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dispatchEvent(new CustomEvent("highlight",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}},{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.dispatchEvent(new CustomEvent("register",{bubbles:!0,cancelable:!0,composed:!0,detail:{remove:e,toolbar:this}}))}},{key:"selectNode",value:function(e){this.dispatchEvent(new CustomEvent("selectnode",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}},{key:"selectNodeContents",value:function(e){this.dispatchEvent(new CustomEvent("selectnodecontents",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}},{key:"selectRange",value:function(e){this.dispatchEvent(new CustomEvent("selectrange",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}},{key:"newEditor",value:function(e){var t=document.createElement("rich-text-editor");e.parentNode.insertBefore(t,e),t.appendChild(e)}},{key:"pasteFromClipboard",value:function(){this.dispatchEvent(new CustomEvent("pastefromclipboard",{bubbles:!0,cancelable:!0,composed:!0,detail:this.editor}))}},{key:"_addButton",value:function(e,t){var n=document.createElement(e.type),o=n.shortcutKeys?n.shortcutKeys.replace(/ctrl\+[xcv]/g,""):"";for(var i in this.shortcutKeys[o]=n,e)n[i]=e[i];return n.setAttribute("class","button"),n.addEventListener("button-command",this._handleButton),t.appendChild(n),n}},{key:"_getButtons",value:function(){var e=this,t=this.shadowRoot&&this.shadowRoot.querySelector("#toolbar")?this.shadowRoot.querySelector("#toolbar"):void 0;if(t){var n=t.querySelector("#morebutton"),o=0,i=["xs","sm","md","lg","xl"],r=[];return t.innerHTML="",this.shortcutKeys=[],this.config.forEach(function(a){if("button-group"===a.type){var s=document.createElement("div");s.setAttribute("class","group"),void 0!==a.collapsedUntil&&null!==a.collapsedUntil&&s.setAttribute("collapsed-until",a.collapsedUntil),o=Math.max(o,i.indexOf(a.collapsedUntil)),a.buttons.forEach(function(t){o=Math.max(o,i.indexOf(t.collapsedUntil)),(navigator.clipboard||"paste"!==t.command)&&r.push(e._addButton(t,s))}),t.appendChild(s)}else o=Math.max(o,i.indexOf(a.collapsedUntil)),(navigator.clipboard||"paste"!==a.command)&&r.push(e._addButton(a,t));t.appendChild(n),n.collapseMax=i[o]}),r}return[]}},{key:"_editorChange",value:function(){this.range=void 0,this.c&&(this.breadcrumbs.controls=this.controls,this.breadcrumbs.sticky=this.sticky,this.breadcrumbs.controls=this.controls,this.breadcrumbs.hidden=this.disconnected,this.editor&&this.editor.parentNode.insertBefore(this.breadcrumbs,this.editor.nextSibling))}},{key:"_rangeChange",value:function(){var e=this;this.range&&this.range.commonAncestorContainer&&this.editor&&this.editor.contains(this.range.commonAncestorContainer)&&((this.buttons||[]).forEach(function(t){t.range=void 0,t.range=e.range,t.selectedNode=e.selectedNode,t.selectionAncestors=e.selectionAncestors}),this.breadcrumbs&&(this.breadcrumbs.controls=this.controls,this.breadcrumbs.selectionAncestors=this.selectionAncestors,this.breadcrumbs.hidden=this.disconnected))}},{key:"_registerButton",value:function(e){var t=this;e.stopPropagation(),e.detail&&(e.detail.tags||[]).forEach(function(n){return t.__clickableElements[n]=e.detail.handler}),console.log(this.__clickableElements)}},{key:"_toggleMore",value:function(e){this.collapsed=!this.collapsed}},{key:"disconnected",get:function(){return"always"!=this.show&&("selection"!=this.show?!this.editor:this.noSelection)}},{key:"noSelection",get:function(){return!this.range||this.range.collapsed}},{key:"controls",get:function(){return this.editor?this.editor.getAttribute("id"):void 0}}]),r}()},Y=function(e){N(o,X(t.LitElement));var n=U(o);function o(){return T(this,o),n.apply(this,arguments)}return o}();function Z(){var e=I(['\n      <absolute-position-behavior\n        auto\n        id="floating"\n        fit-to-visible-bounds\n        for="','"\n        position="top"\n      >\n        ',"\n      </absolute-position-behavior>\n    "]);return Z=function(){return e},e}window.customElements.define(Y.tag,Y);var ee=function(e){N(o,X(t.LitElement));var n=U(o);function o(){var e;return T(this,o),(e=n.call(this)).sticky=!1,e.config=e.miniConfig,e}return R(o,[{key:"render",value:function(){return t.html(Z(),this.controls,H(A(o.prototype),"render",this).call(this))}}],[{key:"tag",get:function(){return"rich-text-editor-toolbar-mini"}},{key:"styles",get:function(){return[].concat(z(H(A(o),"baseStyles",this)),z(H(A(o),"miniStyles",this)))}}]),R(o,[{key:"updated",value:function(e){var t=this;H(A(o.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"sticky"===n&&t.sticky&&(t.sticky=!1)})}}]),o}();function te(){var e=I(["\n        #button {\n          font-family: monospace;\n          display: inline-block;\n          text-align: center;\n          min-width: 30px;\n          line-height: 30px;\n          margin: 0;\n          padding: 2px 5px;\n        }\n      "]);return te=function(){return e},e}function ne(){var e=I(['\n      <button\n        id="button"\n        class="rtebutton rtebreadcrumb"\n        aria-controls="','"\n        @click="','"\n        tabindex="0"\n        part="button"\n      >\n        ',"\n      </button>\n    "]);return ne=function(){return e},e}window.customElements.define(ee.tag,ee);var oe=function(e){N(o,d.RichTextEditorButtonStyles(t.LitElement));var n=U(o);function o(){var e;return T(this,o),(e=n.call(this)).label="",e.addEventListener("mousedown",function(e){e.preventDefault()}),e.addEventListener("keypress",function(e){e.preventDefault()}),e}return R(o,[{key:"render",value:function(){return t.html(ne(),this.controls,this._buttonTap,this.label)}}],[{key:"tag",get:function(){return"rich-text-editor-breadcrumb"}},{key:"styles",get:function(){return[].concat(z(H(A(o),"styles",this)),[t.css(te())])}},{key:"properties",get:function(){return{controls:{type:String},label:{type:String},target:{type:Object}}}}]),R(o,[{key:"firstUpdated",value:function(e){var t=this;H(A(o.prototype),"firstUpdated",this)&&H(A(o.prototype),"firstUpdated",this).call(this,e),this.__a11y=this.shadowRoot.querySelector("#button"),this.__a11y.addEventListener("keypress",function(e){switch(e.key){case"Enter":t._buttonTap(e)}})}},{key:"_buttonTap",value:function(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("breadcrumb-tap",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}}]),o}();function ie(){var e=I(["\n        :host {\n          display: block;\n          background-color: var(--rich-text-editor-bg);\n          color: var(--rich-text-editor-button-color);\n          border: var(--rich-text-editor-border);\n          padding: 3px 10px;\n        }\n        :host([sticky]) {\n          position: sticky;\n          bottom: 0;\n        }\n        .selectednode {\n          background-color: var(--rich-text-editor-bg);\n        }\n      "]);return ie=function(){return e},e}function re(){var e=I([' <span class="divider"> &gt; </span> ']);return re=function(){return e},e}function ae(){var e=I(['\n              <rich-text-editor-breadcrumb\n                controls="','"\n                label="','"\n                .target="','"\n                @breadcrumb-tap="','"\n              >\n              </rich-text-editor-breadcrumb>\n              ',"\n            "]);return ae=function(){return e},e}function se(){var e=I(["\n      ","\n      ","\n    "]);return se=function(){return e},e}window.customElements.define(oe.tag,oe);var le=function(e){N(i,n.RichTextEditorStyles(t.LitElement));var o=U(i);function i(){var e;return T(this,i),(e=o.call(this)).hidden=!0,e.sticky=!1,e.label="Expand selection: ",e}return R(i,[{key:"render",value:function(){var e=this;return t.html(se(),this.label,this.selectionAncestors?(this.selectionAncestors||[]).map(function(n,o){return t.html(ae(),e.controls,n.nodeName.toLowerCase(),n,e._handleBreadcrumb,o+1>=(e.selectionAncestors||[]).length?"":t.html(re()))}):"")}}],[{key:"tag",get:function(){return"rich-text-editor-breadcrumbs"}},{key:"styles",get:function(){return[].concat(z(H(A(i),"styles",this)),[t.css(ie())])}},{key:"properties",get:function(){return{controls:{type:String},hidden:{type:Boolean,attribute:"hidden",reflect:!0},label:{type:String},sticky:{type:Boolean,reflect:!0},selectionAncestors:{type:Array}}}}]),R(i,[{key:"selectNode",value:function(e){this.dispatchEvent(new CustomEvent("selectnode",{bubbles:!0,composed:!0,cancelable:!0,detail:e}))}},{key:"_handleBreadcrumb",value:function(e){e.detail.target&&this.selectNode(e.detail.target)}}]),i}();window.customElements.define(le.tag,le);var ce=function(e){N(o,X(t.LitElement));var n=U(o);function o(){var e;return T(this,o),(e=n.call(this)).breadcrumbsLabel="Expand selection: ",e.breadcrumbs=document.createElement("rich-text-editor-breadcrumbs"),e.breadcrumbs.onselectnode=function(t){return e._selectNode(t.detail)},document.body.appendChild(e.breadcrumbs),e}return R(o,[{key:"render",value:function(){return H(A(o.prototype),"render",this).call(this)}}],[{key:"tag",get:function(){return"rich-text-editor-toolbar-full"}},{key:"styles",get:function(){return[].concat(z(H(A(o),"baseStyles",this)),z(H(A(o),"stickyStyles",this)))}},{key:"properties",get:function(){return B(B({},H(A(o),"properties",this)),{},{breadcrumbsLabel:{name:"breadcrumbsLabel",type:String,attribute:"breadcrumbs-label"}})}}]),o}();function de(){var e=I(['\n:host([hidden]) {\n  display: none;\n}\n\n:host {\n  display: block;\n  cursor: pointer;\n  min-height: 40px;\n  outline: var(--rich-text-editor-border-width, 1px) solid transparent;\n}\n\n:host(:empty) {\n  outline: var(--rich-text-editor-border-width, 1px) dashed var(--rich-text-editor-border-color);\n}\n\n:host(:hover),\n:host([contenteditable="true"]),\n:host([contenteditable="true"]):focus-within,\n:host([contenteditable="true"]):focus {\n  outline: var(--rich-text-editor-border-width, 1px) solid var(--rich-text-editor-border-focus-color);\n}\n\n:host([contenteditable="true"]):focus-within,\n:host([contenteditable="true"]):focus {\n  padding: 2px;\n  margin-bottom: 2px;\n}\n\n:host(.heightmax[contenteditable="true"]) {\n  max-height: calc(100vh - 200px);\n  overflow-y: scroll;\n}\n\n:host(:empty):before {\n  content: attr(placeholder);\n  padding: 0 5px;\n  display: block;\n  z-index: -1;\n  color: var(--rich-text-editor-button-disabled-color);\n}\n\n*::selection .rich-text-editor-selection {\n  background-color: var(--rich-text-editor-selection-bg);\n}\n\n::slotted(*:first-child) {\n  margin-top: 0;\n}\n\n::slotted(*:last-child) {\n  margin-bottom: 0;\n}\n      ']);return de=function(){return e},e}function ue(){var e=I(['\n\n<slot\n  @focus="','"\n  @blur="','"\n  @mouseover="','"\n  @mouseout="','"></slot>']);return ue=function(){return e},e}window.customElements.define(ce.tag,ce);var he=function(e){N(o,i.RichTextEditorStyles(t.LitElement));var n=U(o);function o(){var e;T(this,o),(e=n.call(this)).haxUIElement=!0,window.RichTextEditorStyleManager.requestAvailability(),e.placeholder="Click to edit",e.toolbar="",e.type="rich-text-editor-toolbar",e.id="",e.range=void 0,e.__focused=!1,e.__hovered=!1,e.contenteditable=!1,e.__selection=window.RichTextEditorSelection.requestAvailability();var t=q(e);return document.addEventListener(j.eventName,e._getRange.bind(t)),e}return R(o,[{key:"render",value:function(){var e=this;return t.html(ue(),function(t){return e.__focused=!0},function(t){return e.__focused=!1},function(t){return e.__hovered=!0},function(t){return e.__hovered=!1})}}],[{key:"styles",get:function(){return[].concat(z(H(A(o),"styles",this)),[t.css(de())])}},{key:"haxProperties",get:function(){return{canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Rich text-editor",description:"a standalone rich text editor",icon:"icons:android",color:"green",groups:["Text"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"nikkimk",owner:"Penn State University"}},settings:{configure:[{property:"title",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"}],advanced:[]}}}},{key:"properties",get:function(){return B(B({},H(A(o),"properties",this)),{},{id:{name:"id",type:String,reflect:!0,attribute:"id"},contenteditable:{name:"contenteditable",type:Boolean,reflect:!0,attribute:"contenteditable"},disableHover:{name:"disableHover",type:Boolean,attribute:"disable-hover"},placeholder:{name:"placeholder",type:String,reflect:!0,attribute:"placeholder"},toolbar:{name:"toolbar",type:String,reflect:!0,attribute:"toolbar"},range:{name:"range",type:Object,attribute:"range"},rawhtml:{type:String,attribute:"rawhtml"},type:{name:"type",type:String,reflect:!0,attribute:"type"},updateRange:{type:Boolean},__canceledEdits:{type:Object},__connectedToolbar:{type:Object},__focused:{type:Boolean},__hovered:{type:Boolean},__selection:{type:Object}})}},{key:"tag",get:function(){return"rich-text-editor"}}]),R(o,[{key:"connectedCallback",value:function(){var e=this;H(A(o.prototype),"connectedCallback",this).call(this),setTimeout(function(){e.register()},1)}},{key:"disconnectedCallback",value:function(){H(A(o.prototype),"disconnectedCallback",this).call(this),this.register(!0)}},{key:"firstUpdated",value:function(){H(A(o.prototype),"firstUpdated",this)&&H(A(o.prototype),"firstUpdated",this).call(this),this.isEmpty()&&this.rawhtml?this.setHTML(this.rawhtml):(this.isEmpty()&&(this.innerHTML=""),this._editableChange())}},{key:"updated",value:function(e){var t=this;H(A(o.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"contenteditable"===n&&t._editableChange(),"range"===n&&t._rangeChange(),"rawhtml"===n&&t.rawhtml&&t.setHTML(t.rawhtml)}),this.innerHTML||(this.innerHTML="")}},{key:"haxHooks",value:function(){return{activeElementChanged:"haxactiveElementChanged"}}},{key:"haxactiveElementChanged",value:function(e,t){return!t&&e&&(e.innerHTML=this.getValue()),e}},{key:"disableEditing",value:function(){this.contenteditable=!1,this.dispatchEvent(new CustomEvent("editing-disabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()}))}},{key:"enableEditing",value:function(){this.contenteditable=!0,this.dispatchEvent(new CustomEvent("editing-enabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()}))}},{key:"focus",value:function(){this.__focused=!0,this.dispatchEvent(new CustomEvent("focus",{bubbles:!0,composed:!0,cancelable:!0,detail:this.querySelector("*")}))}},{key:"getHTML",value:function(){return this.isEmpty()||this.isPlaceholder()?"":(this.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()}},{key:"isEmpty",value:function(){return!this.innerHTML||""==this.trimHTML(this)}},{key:"isPlaceholder",value:function(){this.trimHTML(this),this.trimString(this.placeholderHTML)}},{key:"makeSticky",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.classList.remove("heightmax"):this.classList.add("heightmax")}},{key:"observeChanges",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.observer.observe(this,{attributes:!1,childList:!0,subtree:!0,characterData:!1}):this.observer&&this.observer.disconnect}},{key:"paste",value:function(e){this._handlePaste(e)}},{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.dispatchEvent(new CustomEvent("register",{bubbles:!0,cancelable:!0,composed:!0,detail:{remove:e,editor:this}}))}},{key:"revert",value:function(){this.innerHTML=this.__canceledEdits}},{key:"rootNode",value:function(){return this.__selection?this.__selection.getRoot(this):document}},{key:"setHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.innerHTML=e.trim(),this.setCancelHTML(e.trim()),this.isEmpty()&&(this.innerHTML=""),this._editableChange()}},{key:"setCancelHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.innerHTML;this.__canceledEdits=e||""}},{key:"trimHTML",value:function(e){var t=e?e.innerHTML:void 0;return this.trimString(t)}},{key:"trimString",value:function(e){return(e||"").replace(/<!--[^(-->)]*-->/g,"").replace(/[\s\t\r\n]/gim,"")}},{key:"updateRange",value:function(e){this.dispatchEvent(new CustomEvent("getrange",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_editableChange",value:function(){this.contenteditable?(this.setCancelHTML(),this.isEmpty()&&(this.innerHTML=this.placeholderHTML||"")):this.isPlaceholder()&&this.setCancelHTML("")}},{key:"_getRange",value:function(){this.range=j.getRange(function e(t){var n=t.parentNode;return n?e(n):t}(this)),this.updateRange()}},{key:"_handlePaste",value:function(e){e&&(e.clipboardData||e.originalEvent.clipboardData)?(e.originalEvent||e).clipboardData.getData("text/html"):window.clipboardData&&window.clipboardData.getData("Text"),this.dispatchEvent(new CustomEvent("pastefromclipboard",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),e.preventDefault()}},{key:"_rangeChange",value:function(e){}},{key:"observer",get:function(){return new MutationObserver(this._getRange)}},{key:"placeHolderHTML",get:function(){return"<p>".concat(this.placeholder,"</p>")}}]),o}();window.customElements.define(he.tag,he),e.RichTextEditor=he,Object.defineProperty(e,"__esModule",{value:!0})});
